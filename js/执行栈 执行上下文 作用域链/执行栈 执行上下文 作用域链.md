https://juejin.im/post/6876623829574090760#heading-86

### Js执行栈

**Js执行上下文**： 执行上下文就是JavaScript 在被解析和运行时环境的抽象概念，JavaScript 运行任何代码都是在执行上下文环境中运行的，执行上下文包括三个周期：创建——运行——销毁，重点说一下创建环节。
 创建环节（函数被调用，但未未被执行）会执行三件事情

1. 创建变量对象，首先初始化函数的arguments对象，提升函数声明和变量声明，从近到远查找函数运行所需要的变量。
2. 创建作用域链，作用域就是一个独立的地盘，让变量不会相互干扰，当前作用域没有定义的变量，这成为 自由变量。自由变量会向上一直寻找，要到创建这个函数的那个作用域中取值——是“创建”，而不是“调用”，如果最终没有就为undefined。这种层层之间的调用关系就构成了作用域链。
3. 确定this指向，this、apply、call的指向
    **Js执行栈** JavaScript 引擎创建了执行栈来管理执行上下文，可以把执行栈认为成一个储存函数调用的栈结构，遵循先进后出的原则。
    Js中有三种执行上下文

- 全局执行上下文，默认的，在浏览器中是window对象，并且this在非严格模式下指向它。
- 函数执行上下文，JS的函数每当被调用时会创建一个上下文。
- Eval执行上下文，eval函数会产生自己的上下文，这里不讨论。 Js执行栈工作过程
   1 JavaScript引擎是单线程执行，所有代码都是排队执行。

1. 一开始执行的是全局代码，首先创建全局的执行上下文，然后将该执行上下文压入执行栈中。
2. 每当执行一个函数，就会创建该函数的执行上下文，然后将其压入执行栈的顶部，函数执行完成后，执行上下文从底部退出，等待垃圾回收。
3. 浏览器js总是访问执行栈顶层的执行上下文。
4. 全局上下文只有唯一的一个，它在浏览器关闭时出栈