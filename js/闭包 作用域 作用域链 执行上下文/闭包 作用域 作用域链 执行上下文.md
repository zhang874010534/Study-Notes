```js
function a(){
    var n = 0;
    function add(){
       n++;
       console.log(n);
    }
    return add;
}
```

函数a执行，有执行上下文，之后运行返回的add函数，add函数对应的执行上下文里在add的作用域里寻找n变量，没有找到，所以顺着作用域链找到了a函数的作用域里的n变量。

add可以访问a函数作用域里的变量，所以add可以称之为闭包



### [Javascript 的作用域和作用域链](https://juejin.im/post/5ef8377f6fb9a07e693a6061#heading-12)

**作用域：** 作用域是定义变量的区域，它有一套访问变量的规则，这套规则来管理浏览器引擎如何在当前作用域以及嵌套的作用域中根据变量（标识符）进行变量查找。

**作用域链：** 作用域链的作用是保证对执行环境有权访问的所有变量和函数的有序访问，通过作用域链，我们可以访问到外层环境的变量和 函数。

作用域链的本质上是一个指向变量对象的指针列表。变量对象是一个包含了执行环境中所有变量和函数的对象。作用域链的前 端始终都是当前执行上下文的变量对象。全局执行上下文的变量对象（也就是全局对象）始终是作用域链的最后一个对象。

当我们查找一个变量时，如果当前执行环境中没有找到，我们可以沿着作用域链向后查找。

作用域链的创建过程跟执行上下文的建立有关....

详细资料可以参考： [《JavaScript 深入理解之作用域链》](http://cavszhouyou.top/JavaScript深入理解之作用域链.html)

也可以看看我的文章：[「前端料包」深究JavaScript作用域（链）知识点和闭包](https://juejin.im/post/5e93e4eaf265da47fc0ce177)

### [什么是闭包，为什么要用它？](https://juejin.im/post/5ef8377f6fb9a07e693a6061#heading-19)

**闭包是指有权访问另一个函数作用域内变量的函数**，创建闭包的最常见的方式就是在一个函数内创建另一个函数，创建的函数可以 访问到当前函数的局部变量。

闭包有两个常用的用途。

- 闭包的第一个用途是使我们在函数外部能够访问到函数内部的变量。通过使用闭包，我们可以通过在外部调用闭包函数，从而在外部访问到函数内部的变量，可以使用这种方法来创建私有变量。
- 函数的另一个用途是使已经运行结束的函数上下文中的变量对象继续留在内存中，因为闭包函数保留了这个变量对象的引用，所以这个变量对象不会被回收。

```js
function a(){
    var n = 0;
    function add(){
       n++;
       console.log(n);
    }
    return add;
}
var a1 = a(); //注意，函数名只是一个标识（指向函数的指针），而（）才是执行函数；
a1();    //1
a1();    //2  第二次调用n变量还在内存中
```

其实闭包的本质就是作用域链的一个特殊的应用，只要了解了作用域链的创建过程，就能够理解闭包的实现原理。